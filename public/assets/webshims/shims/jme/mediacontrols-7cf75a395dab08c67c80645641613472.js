webshims.register("mediacontrols",function(e,a,t){"use strict";var r=a.cfg.mediaelement.jme,i=r.selector,s=e.jme,n='<div class="{%class%}"></div>',o='<button class="{%class%}" type="button" aria-label="{%text%}"></button>',l='<div class="{%class%} media-range" aria-label="{%text%}"></div>',d='<div  class="{%class%}">00:00</div>',c=function(){var e,a="";if(t.Audio)try{e=new Audio,e.volume=.55,a=.55==Math.round(100*e.volume)/100?"":" no-volume-api"}catch(r){}return a}(),u=function(){var e={},t=/\{\{(.+?)\}\}/gim;return function(i,o){return i||(i=r.barTemplate),(!e[i]||o)&&(e[i]=i.replace(t,function(e,t){var r=s.plugins[t];return r?(r.structure||(a.warn("no structure option provided for plugin: "+t+". Fallback to standard div"),r.structure=n),r.structure.replace("{%class%}",t).replace("{%text%}",r.text||"")):e})),e[i]||""}}(),m=/iP(hone|od|ad)/i.test(navigator.platform)&&parseInt((navigator.appVersion.match(/OS (\d+)_\d+/)||["","8"])[1],10)<7,p=function(){p.loaded||(p.loaded=!0,a.loader.loadList(["mediacontrols-lazy","range-ui"]))},v=function(t){t||(t="_create");var r=function(i,s){var n=this,o=arguments;p(),a.ready("mediacontrols-lazy",function(){return r!=n[t]&&e.data(s[0])?n[t].apply(n,o):(a.error("stop too much recursion"),void 0)})};return r};a.loader.addModule("mediacontrols-lazy",{src:"jme/mediacontrols-lazy"});var f={_create:v()};s.plugins.useractivity=f,s.defineProp("controlbar",{set:function(i,n){n=!!n;var o,l,d=s.data(i),c=e("div.jme-mediaoverlay, div.jme-controlbar",d.player),p="";if(n&&!c[0])if(d._controlbar)d._controlbar.appendTo(d.player);else{m&&(d.media.removeAttr("controls"),d.media.mediaLoad()),d.media.prop("controls",!1),p=u(),d._controlbar=e(r.barStructure),c=d._controlbar.find("div.jme-cb-box").addClass("media-controls"),o=d._controlbar.filter(".jme-media-overlay"),o=o.add(c),e(p).appendTo(c),d._controlbar.appendTo(d.player),d.player.jmeFn("addControls",o),l=function(){var e={},a=[{size:290,name:"xx-small",names:"s xs xxs"},{size:380,name:"x-small",names:"s xs"},{size:478,name:"small",names:"s"},{size:756,name:"medium",names:"m"},{size:1024,name:"large",names:"l"},{size:Number.MAX_VALUE,name:"x-large",names:"l xl"}],t=a.length;return function(){var r,i=0,s=d.player.outerWidth(),n=Math.max(parseInt(d.player.css("fontSize"),10)||16,13);for(s*=16/n;t>i;i++)if(a[i].size>=s){r=a[i];break}e.name!=r.name&&(e=r,d.player.attr("data-playersize",r.name),d.player.attr("data-playersizes",r.names))}}();var v=e('<div class="ws-poster" />').insertAfter(d.media),g=function(){var e,a,r,i=t.swfmini&&swfmini.hasFlashPlayerVersion("10.0.3"),s=/youtube\.com\/[watch\?|v\/]+/i,n=d.media.prop("paused");return n&&d.player.addClass("initial-state"),"backgroundSize"in v[0].style||d.player.addClass("no-backgroundsize"),d.media.on("playing waiting seeked seeking",function(){n&&(n=!1,d.player.removeClass("initial-state"))}),function(){var t=d.media.attr("poster"),o=!!t,l=d.media.prop("currentSrc")||"",c=s.test(l),u=i&&o?!1:c;!o&&c&&(t=l.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/i)||"",t&&(t="https://img.youtube.com/vi/"+t[1]+"/0.jpg",o=!!t)),r!==t&&(r=t,v[0].style.backgroundImage=t?"url("+t+")":""),e!==o&&(e=o,d.player[o?"removeClass":"addClass"]("no-poster")),d.media.prop("paused")&&(d.player.addClass("initial-state"),n=!0),a!==u&&(a=u,d.player[u?"addClass":"removeClass"]("has-ytposter"))}}();f._create(d.player,d.media,d.player),d.media.on("emptied loadstart",function(){setTimeout(g)}),l(),g(),a.ready("dom-support",function(){d.player.onWSOff("updateshadowdom",l),o.add(d._controlbar).add(v).addClass(a.shadowClass),a.addShadowDom()})}else n||c.detach();return n}}),s.registerPlugin("play-pause",{structure:o,text:"play / pause",_create:v()}),s.registerPlugin("mute-unmute",{structure:o,text:"mute / unmute",_create:v()}),s.registerPlugin("jme-media-overlay",{_create:v()}),s.registerPlugin("volume-slider",{structure:l,text:"volume level",_create:v()}),s.registerPlugin("time-slider",{structure:l,options:{format:["mm","ss"]},text:"time position",_create:v()}),s.defineProp("format",{set:function(a,t){e.isArray(t)||(t=t.split(":"));var r=s.data(a);return r.format=t,e(a).triggerHandler("updatetimeformat"),r.player.triggerHandler("updatetimeformat"),"noDataSet"}}),s.registerPlugin("duration-display",{structure:d,options:{format:"mm:ss"},_create:v()}),s.defineProp("countdown",{set:function(a,t){var r=s.data(a);return r.countdown=!!t,e(a).triggerHandler("updatetimeformat"),r.player.triggerHandler("updatetimeformat"),"noDataSet"}}),s.registerPlugin("currenttime-display",{structure:d,options:{format:"mm:ss",countdown:!1},_create:v()}),s.registerPlugin("poster-display",{structure:"<div />",options:{},_create:v()}),s.registerPlugin("fullscreen",{options:{fullscreen:!0,autoplayfs:!1},structure:o,text:"enter fullscreen / exit fullscreen",_create:v()}),s.registerPlugin("mediaconfigmenu",{structure:o,text:"configuration",_create:v()}),s.registerPlugin("captions",{structure:o,text:"subtitles",_create:function(a,t,r){var i=t.find("track").filter(':not([kind]), [kind="subtitles"], [data-kind="subtitles"], [kind="captions"], [data-kind="captions"]');a.wsclonedcheckbox=e(a).clone().attr({role:"checkbox"}).insertBefore(a),r.attr("data-tracks",i.length>1?"many":i.length),a.attr("aria-haspopup","true"),v().apply(this,arguments)}}),s.registerPlugin("chapters",{structure:o,text:"chapters",_create:function(e,t,r){var i=t.find("track").filter('[kind="chapters"], [data-kind="chapters"]');e.attr("aria-haspopup","true"),i.length&&(a._polyfill(["track"]),r.addClass("has-chapter-tracks")),v().apply(this,arguments)}}),a.ready(a.cfg.mediaelement.plugins.concat(["mediaelement","jme-base"]),function(){r.barTemplate||(r.barTemplate='<div class="play-pause-container">{{play-pause}}</div><div class="playlist-container"><div class="playlist-box"><div class="playlist-button-container">{{playlist-prev}}</div><div class="playlist-button-container">{{playlist-next}}</div></div></div><div class="currenttime-container">{{currenttime-display}}</div><div class="progress-container">{{time-slider}}</div><div class="duration-container">{{duration-display}}</div><div class="mute-container">{{mute-unmute}}</div><div class="volume-container">{{volume-slider}}</div><div class="chapters-container"><div class="chapters-controls mediamenu-wrapper">{{chapters}}</div></div><div class="subtitle-container mediamenu-wrapper"><div class="subtitle-controls">{{captions}}</div></div><div class="mediaconfig-container"><div class="mediaconfig-controls mediamenu-wrapper">{{mediaconfigmenu}}</div></div><div class="fullscreen-container">{{fullscreen}}</div>'),r.barStructure||(r.barStructure='<div class="jme-media-overlay"></div><div class="jme-controlbar'+c+'" tabindex="-1"><div class="jme-cb-box"></div></div>'),a.addReady(function(a,t){e(i,a).add(t.filter(i)).jmeProp("controlbar",!0)})}),a.ready("WINDOWLOAD",p)});