!function(t){!function(){function e(e){var s=e||window.event,o=r.call(arguments,1),l=0,u=0,c=0,p=0;return e=t.event.fix(s),e.type="mousewheel","detail"in s&&(c=-1*s.detail),"wheelDelta"in s&&(c=s.wheelDelta),"wheelDeltaY"in s&&(c=s.wheelDeltaY),"wheelDeltaX"in s&&(u=-1*s.wheelDeltaX),"axis"in s&&s.axis===s.HORIZONTAL_AXIS&&(u=-1*c,c=0),l=0===c?u:c,"deltaY"in s&&(c=-1*s.deltaY,l=c),"deltaX"in s&&(u=s.deltaX,0===c&&(l=-1*u)),0!==c||0!==u?(p=Math.max(Math.abs(c),Math.abs(u)),(!a||a>p)&&(a=p),l=Math[l>=1?"floor":"ceil"](l/a),u=Math[u>=1?"floor":"ceil"](u/a),c=Math[c>=1?"floor":"ceil"](c/a),e.deltaX=u,e.deltaY=c,e.deltaFactor=a,o.unshift(e,l,u,c),i&&clearTimeout(i),i=setTimeout(n,200),(t.event.dispatch||t.event.handle).apply(this,o)):void 0}function n(){a=null}if(!t.event.special.mousewheel){var i,a,s=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],o="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],r=Array.prototype.slice;if(t.event.fixHooks)for(var l=s.length;l;)t.event.fixHooks[s[--l]]=t.event.mouseHooks;t.event.special.mousewheel={version:"3.1.6",setup:function(){if(this.addEventListener)for(var t=o.length;t;)this.addEventListener(o[--t],e,!1);else this.onmousewheel=e},teardown:function(){if(this.removeEventListener)for(var t=o.length;t;)this.removeEventListener(o[--t],e,!1);else this.onmousewheel=null}},t.fn.extend({mousewheel:function(t){return t?this.on("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.off("mousewheel",t)}})}}(),function(){function e(){this===a.elem&&(a.pos=[-260,-260],a.elem=!1,s=3)}if(!t.event.special.mwheelIntent){var n,i,a={pos:[-260,-260]},s=3,o=document,r=o.documentElement,l=o.body;l||t(function(){l=o.body}),t.event.special.mwheelIntent={setup:function(){var n=t(this).on("mousewheel",t.event.special.mwheelIntent.handler);return this!==o&&this!==r&&this!==l&&n.on("mouseleave",e),n=null,!0},teardown:function(){return t(this).off("mousewheel",t.event.special.mwheelIntent.handler).off("mouseleave",e),!0},handler:function(e){var o=[e.clientX,e.clientY];return this===a.elem||Math.abs(a.pos[0]-o[0])>s||Math.abs(a.pos[1]-o[1])>s?(a.elem=this,a.pos=o,s=250,clearTimeout(i),i=setTimeout(function(){s=10},200),clearTimeout(n),n=setTimeout(function(){s=3},1500),e=t.extend({},e,{type:"mwheelIntent"}),(t.event.dispatch||t.event.handle).apply(this,arguments)):void 0}},t.fn.extend({mwheelIntent:function(t){return t?this.on("mwheelIntent",t):this.trigger("mwheelIntent")},unmwheelIntent:function(t){return this.off("mwheelIntent",t)}}),t(function(){l=o.body,t(o).on("mwheelIntent.mwheelIntentDefault",t.noop)})}}(),function(){if(!t.event.special.mousepress){var e=function(t,e){var n=t.data("mousepresstimer");n&&clearTimeout(n),e&&t.off("mouseup.mousepressext mouseleave.mousepressext"),t=null};t.event.special.mousepress={setup:function(){t(this).on("mousedown.mousepressext",function(n){var i=t(this),a=function(s){var o=0;e(i),i.data("mousepresstimer",setInterval(function(){t.event.special.mousepress.handler(i[0],n),o++,o>3&&s>45&&a(s-40)},s))},s=t(n.target).trigger("mousepressstart",[n]);e(i),i.data("mousepresstimer",setTimeout(function(){a(180)},200)),i.on("mouseup.mousepressext mouseleave.mousepressext",function(t){e(i,!0),s.trigger("mousepressend",[t]),i=null,s=null})})},teardown:function(){e(t(this).off(".mousepressext"),!0)},handler:function(e,n){return t.event.dispatch.call(e,{type:"mousepress",target:n.target,pageX:n.pageX,pageY:n.pageY})}}}}()}(webshims.$),webshims.register("forms-picker",function(t,e,n,i,a,s){"use strict";var o=e.picker,r=o._actions,l=s,u=function(t){var e=[t.getFullYear(),l.addZero(t.getMonth()+1),l.addZero(t.getDate())];return e.month=e[0]+"-"+e[1],e.date=e[0]+"-"+e[1]+"-"+e[2],e.time=l.addZero(t.getHours())+":"+l.addZero(t.getMinutes()),e["datetime-local"]=e.date+"T"+e.time,e},c=u(new Date),p=function(e){e=t(e||this.activeButton),this.activeButton.attr({tabindex:"-1","aria-selected":"false"}),this.activeButton=e.attr({tabindex:"0","aria-selected":"true"}),this.index=this.buttons.index(this.activeButton[0]),clearTimeout(this.timer),o._genericSetFocus.apply(this,arguments)},d=function(){var e;this.popover.navedInitFocus&&(e=this.popover.navedInitFocus.sel||this.popover.navedInitFocus,this.activeButton&&this.activeButton[0]||!this.buttons[e]?e&&(this.activeButton=t(e,this.element)):this.activeButton=this.buttons[e](),!this.activeButton[0]&&this.popover.navedInitFocus.alt&&(this.activeButton=this.buttons[this.popover.navedInitFocus.alt]())),this.activeButton&&this.activeButton[0]||(this.activeButton=this.buttons.filter(".checked-value")),this.activeButton[0]||(this.activeButton=this.buttons.filter(".this-value")),this.activeButton[0]||(this.activeButton=this.buttons.eq(0)),this.setFocus(this.activeButton,this.opts.noFocus)},h=e.formcfg,v=h.__active||h[""],m=function(t){t.stopImmediatePropagation()},f=s.steps,g=function(e){t(this)["mousepressstart"==e.type?"addClass":"removeClass"]("mousepress-ui")},b=function(e,n,i){var a=v.date,s=[];return i||(i=""),t.each({monthNames:"monthname",monthDigits:"month-digit",monthNamesShort:"monthname-short"},function(t,o){var r=[i+a[t][e]];n&&(r.push(n),a.showMonthAfterYear&&r.reverse()),s.push('<span class="'+o+'">'+r.join(" ")+"</span>")}),s.join("")},w="inputMode"in i.createElement("input")||!/ipad|iphone/i.test(navigator.userAgent),y={_addBindings:function(){var e,n=this,i=this.options,a=function(){var e={};return{init:function(i,a,s){e[i]||(e[i]={fn:s},t(n.orig).on(i,function(){e[i].val=t.prop(n.orig,"value")})),e[i].val=a},call:function(t,i){e[t]&&e[t].val!=i&&(clearTimeout(e[t].timer),e[t].val=i,e[t].fn(i,n))}}}(),s=function(){a.init("input",t.prop(n.orig,"value"),n.options.input),a.init("change",t.prop(n.orig,"value"),n.options.change)},o={},r=function(i){return r.prevent?(i.preventDefault(),t(e||n.element.getShadowFocusElement()).trigger("focus"),m(i),!0):void 0};!function(){var e,s=function(i){var s;clearTimeout(e),s=n.parseValue(),"color"==n.type&&n.inputElements.val(s),t.prop(n.orig,"value",s),a.call("input",s),i&&"wsupdatevalue"==i.type||a.call("change",s)},o=function(n){clearTimeout(e),t(n.target).trigger("wswidgetfocusin")},r=function(n){clearTimeout(e),e=setTimeout(s,0),t(n.target).trigger("wswidgetfocusout"),"ws__change"==n.type&&(m(n),i.splitInput||s())};n.element.on("wsupdatevalue",s),n.inputElements.add(n.buttonWrapper).add(n.element).on({ws__focusin:o,"ws__blur ws__focusout ws__change":r}),setTimeout(function(){n.popover&&(n.popover.element.on("wspopoverhide",r),n.popover.element.children().on({focusin:o,focusout:r}))},0)}();var l={},u=i.splitInput?this.inputElements.filter(".ws-spin"):this.inputElements.eq(0),c={ws__blur:function(t){r(t)||i.disabled||i.readonly||r.prevent||(e=!1),m(t)},ws__focus:function(){e||(s(),e=this)},keypress:function(t){if(!t.isDefaultPrevented()){var e,i=!0,a=t.keyCode;t.ctrlKey||t.metaKey||!v[n.type+"Signs"]?i=!1:(e=String.fromCharCode(null==t.charCode?a:t.charCode),i=!(" ">e||(v[n.type+"Signs"]+"0123456789").indexOf(e)>-1)),i&&t.preventDefault()}},ws__input:"color"!=this.type&&this.isValid?function(){var t,e="number"!=n.type||i.nogrouping?199:99,a=function(){var t=n.parseValue(!0);t&&n.isValid(t)&&n.setInput(t,!0)};return function(){clearTimeout(t),t=setTimeout(a,e)}}():t.noop,"ws__input keydown keypress":function(){var e,n=!1,a=function(){n===!0?(n="semi",e=setTimeout(a,250)):n=!1},s=function(){n=!0,clearTimeout(e),e=setTimeout(a,300)},o=function(){var t=this;setTimeout(function(){t.focus(),t.select&&t.select()},4),s()};return function(e){if(i.splitInput&&i.jumpInputs)if("ws__input"==e.type){if(t.prop(this,"value").length===t.prop(this,"maxLength"))try{t(this).next().next("input, select").each(o)}catch(a){}}else e.shiftKey||e.crtlKey||9!=e.keyCode||n!==!0&&(!n||t.prop(this,"value"))||e.preventDefault()}}()},p=function(){return i.disabled||e||n.element.getShadowFocusElement().trigger("focus"),r.set(),!1};r.set=function(){var t,e=function(){r.prevent=!1};return function(){clearTimeout(t),r.prevent=!0,setTimeout(e,9)}}(),i.splitInput&&w&&null==i.jumpInputs&&(i.jumpInputs=!0),this.buttonWrapper.on("mousedown",p),this.setInput=function(t,e){n.value(t,!1,e),a.call("input",t)},this.setChange=function(t){n.setInput(t),a.call("change",t)},this.inputElements.on(c),f[this.type]&&(["stepUp","stepDown"].forEach(function(t){o[t]=function(s){if(!i.disabled&&!i.readonly){e||p();var o=!1;if(s||(s=1),i.stepfactor&&(s*=i.stepfactor),s>0&&!isNaN(n.minAsNumber)&&(isNaN(n.valueAsNumber)||n.valueAsNumber<n.minAsNumber)&&n.elemHelper.prop("valueAsNumber")<=n.minAsNumber?o=n.asValue(n.minAsNumber):0>s&&!isNaN(n.maxAsNumber)&&(isNaN(n.valueAsNumber)||n.valueAsNumber>n.minAsNumber)&&n.elemHelper.prop("valueAsNumber")<=n.maxAsNumber&&(o=n.asValue(n.maxAsNumber)),o===!1)try{n.elemHelper[t](s),o=n.elemHelper.prop("value")}catch(r){!i.value&&n.maxAsNumber>=n.minAsNumber&&(o=i.defValue)}return o!==!1&&i.value!=o&&(n.value(o),i.toFixed&&"number"==i.type&&(n.element[0].value=n.toFixed(n.element[0].value,!0)),a.call("input",o)),o}}}),i.noSpinbtn||(l.mwheelIntent=function(t,n){n&&e&&!i.disabled&&(o[n>0?"stepUp":"stepDown"](),t.preventDefault())},l.keydown=function(e){if(!(i.list||e.isDefaultPrevented()||e.altKey&&40==e.keyCode||t.attr(this,"list"))){var n=!0,a=e.keyCode;38==a?o.stepUp():40==a?o.stepDown():n=!1,n&&e.preventDefault()}},u.on(l)),t(this.buttonWrapper).on("mousepressstart mousepressend",".step-up, .step-down",g).on("mousedown mousepress",".step-up",function(){o.stepUp()}).on("mousedown mousepress",".step-down",function(){o.stepDown()}),s())},_getSelectionEnd:function(t){var e,n;return(e=this.element[0].value)&&this.element.is(":focus")&&(n=this.element.prop("selectionEnd"))<e.length?("number"==this.type&&(e=e.substr(0,n).split(v.numberFormat[","]),t=t.substr(0,n).split(v.numberFormat[","]),e.length<t.length?n++:e.length>t.length&&n--),n):void 0},initDataList:function(){var e,n=this,i=function(){t(n.orig).jProp("list").off("updateDatalist",i).on("updateDatalist",i),clearTimeout(e),e=setTimeout(function(){n.list&&n.list()},9)};t(this.orig).onTrigger("listdatalistchange",i)},getOptions:function(){var e={},n=t(this.orig).jProp("list");return n.find("option").each(function(){e[t.prop(this,"value")]=t.prop(this,"label")}),[e,n.data("label")]}};t.extend(t.fn.wsBaseWidget.wsProto,y),t.extend(t.fn.spinbtnUI.wsProto,y),t(h).on("change",function(){v=h.__active}),e.ListBox=function(e,n,i){this.element=t("ul",e),this.popover=n,this.opts=i||{},this.buttons=t("button:not(:disabled)",this.element),this.ons(this),this._initialFocus()},e.ListBox.prototype={setFocus:p,_initialFocus:d,prev:function(){var t=this.index-1;0>t?this.opts.prev&&(this.popover.navedInitFocus="last",this.popover.actionFn(this.opts.prev),this.popover.navedInitFocus=!1):this.setFocus(this.buttons.eq(t))},next:function(){var t=this.index+1;t>=this.buttons.length?this.opts.next&&(this.popover.navedInitFocus="first",this.popover.actionFn(this.opts.next),this.popover.navedInitFocus=!1):this.setFocus(this.buttons.eq(t))},ons:function(t){this.element.on({keydown:function(e){var n,i=e.keyCode;return e.ctrlKey?void 0:(36==i||33==i?(t.setFocus(t.buttons.eq(0)),n=!0):34==i||35==i?(t.setFocus(t.buttons.eq(t.buttons.length-1)),n=!0):38==i||37==i?(t.prev(),n=!0):(40==i||39==i)&&(t.next(),n=!0),n?!1:void 0)}})}},e.Grid=function(e,n,i){this.element=t("tbody",e),this.popover=n,this.opts=i||{},this.buttons=t("button:not(:disabled):not(.othermonth)",this.element),this.ons(this),this._initialFocus(),this.popover.openedByFocus&&(this.popover.activeElement=this.activeButton)},e.Grid.prototype={setFocus:p,_initialFocus:d,first:function(){this.setFocus(this.buttons.eq(0))},last:function(){this.setFocus(this.buttons.eq(this.buttons.length-1))},upPage:function(){t(".ws-picker-header > button:not(:disabled)",this.popover.element).trigger("click")},downPage:function(){this.activeButton.filter(':not([data-action="changeInput"])').trigger("click")},ons:function(t){this.element.on({keydown:function(e){var n,i,a=e.keyCode;return e.shiftKey?void 0:(i=e.ctrlKey||e.altKey,i&&40==a?n="downPage":i&&38==a?n="upPage":33==a||i&&37==a?n="prevPage":34==a||i&&39==a?n="nextPage":36==e.keyCode||33==e.keyCode?n="first":35==e.keyCode?n="last":38==e.keyCode?n="up":37==e.keyCode?n="prev":40==e.keyCode?n="down":39==e.keyCode&&(n="next"),n?(t[n](),!1):void 0)}})}},t.each({prevPage:{get:"last",action:"prev"},nextPage:{get:"first",action:"next"}},function(t,n){e.Grid.prototype[t]=function(){this.opts[n.action]&&(this.popover.navedInitFocus={sel:'button[data-id="'+this.activeButton.attr("data-id")+'"]:not(:disabled,.othermonth)',alt:n.get},this.popover.actionFn(this.opts[n.action]),this.popover.navedInitFocus=!1)}}),t.each({up:{traverse:"prevAll",get:"last",action:"prev",reverse:!0},down:{traverse:"nextAll",get:"first",action:"next"}},function(n,i){e.Grid.prototype[n]=function(){var e=this.activeButton.closest("td").prop("cellIndex"),n="td:nth-child("+(e+1)+") button:not(:disabled,.othermonth)",a=this.activeButton.closest("tr")[i.traverse]();i.reverse&&(a=t(a.get().reverse())),a=a.find(n)[i.get](),a[0]?this.setFocus(a.eq(0)):this.opts[i.action]&&(this.popover.navedInitFocus=n+":"+i.get,this.popover.actionFn(this.opts[i.action]),this.popover.navedInitFocus=!1)}}),t.each({prev:{traverse:"prevAll",get:"last",reverse:!0},next:{traverse:"nextAll",get:"first"}},function(n,i){e.Grid.prototype[n]=function(){var e="button:not(:disabled,.othermonth)",a=this.activeButton.closest("td")[i.traverse]("td");i.reverse&&(a=t(a.get().reverse())),a=a.find(e)[i.get](),a[0]||(a=this.activeButton.closest("tr")[i.traverse]("tr"),i.reverse&&(a=t(a.get().reverse())),a=a.find(e)[i.get]()),a[0]?this.setFocus(a.eq(0)):this.opts[n]&&(this.popover.navedInitFocus=i.get,this.popover.actionFn(this.opts[n]),this.popover.navedInitFocus=!1)}}),o.getWeek=function(t){var e,n=new Date(t.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),e=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((e-n)/864e5)/7)+1},o.getYearList=function(e,n){var i,a,s,r,l,u,p,d,h,v,m=n.options,f=m.size,g=m.max.split("-"),b=m.min.split("-"),w=m.cols||4,y=m.value.split("-"),x=0,D=0,I="",k=0,T=n.orig&&"validatevalue"in t.data(n.orig);for(n.options.useDecadeBase||(!g[0]&&b[0]?n.options.useDecadeBase="min":g[0]&&!b[0]&&(n.options.useDecadeBase="max")),"max"==n.options.useDecadeBase&&g[0]?x=11-g[0]%12:"min"==n.options.useDecadeBase&&b[0]&&(x=0-b[0]%12),e=1*e[0],v=e-(e+x)%(12*f),i=0;f>i;i++){for(i?v+=12:u=o.isInRange([v-1],g,b)?{"data-action":"setYearList",value:v-1}:!1,I+='<div class="year-list picker-list ws-index-'+i+'"><div class="ws-picker-header"><select data-action="setYearList" class="decade-select">'+o.createYearSelect(e,g,b,"",{start:v,step:12*f,label:v+" – "+(v+11)}).join("")+'</select><button disabled="disabled"><span>'+v+" – "+(v+11)+"</span></button></div>",l=[],a=0;12>a;a++)s=v+a,h=[],!o.isInRange([s],g,b)||T&&t(n.orig).triggerHandler("validatevalue",[{value:s,valueAsDate:null,isPartial:[s]}])?r=' disabled=""':(r="",D++),s==c[0]&&h.push("this-value"),y[0]==s&&h.push("checked-value"),d=h.length?' class="'+h.join(" ")+'"':"",!a||a%w||(k++,l.push('</tr><tr class="ws-row-'+k+'">')),l.push('<td class="ws-item-'+a+'" role="presentation"><button  data-id="year-'+a+'" type="button"'+r+d+' data-action="setMonthList" value="'+s+'" tabindex="-1" role="gridcell">'+s+"</button></td>");i==f-1&&(p=o.isInRange([s+1],g,b)?{"data-action":"setYearList",value:s+1}:!1),I+='<div class="picker-grid"><table role="grid" aria-label="'+v+" – "+(v+11)+'"><tbody><tr class="ws-row-0">'+l.join("")+"</tr></tbody></table></div></div>"}return{enabled:D,main:I,next:p,prev:u,type:"Grid"}},o.getMonthList=function(e,n){var i,a,s,r,l,u,p,d,h,m,f=n.options,g=f.size,w=f.maxS,y=f.minS,x=f.cols||4,D=f.value.split("-"),I=0,k=0,T="",F="month"==n.type?"changeInput":"setDayList",_=n.orig&&"validatevalue"in t.data(n.orig),M="changeInput"!=F;for(e=e[0]-Math.floor((g-1)/2),i=0;g>i;i++){for(i?e++:p=o.isInRange([e-1],w,y)?{"data-action":"setMonthList",value:e-1}:!1,i==g-1&&(d=o.isInRange([e+1],w,y)?{"data-action":"setMonthList",value:e+1}:!1),u=[],l=o.isInRange([e,"01"],w,y)||o.isInRange([e,"12"],w,y)?"":' disabled=""',f.minView>=1&&(l=' disabled=""'),T+='<div class="month-list picker-list ws-index-'+i+'"><div class="ws-picker-header">',T+='<select data-action="setMonthList" class="year-select">'+o.createYearSelect(e,w,y).join("")+'</select> <button data-action="setYearList"'+l+' value="'+e+'" tabindex="-1"><span>'+e+"</span></button>",T+="</div>",a=0;12>a;a++)r=v.date.monthkeys[a+1],s=b(a),m=[],!o.isInRange([e,r],w,y)||_&&t(n.orig).triggerHandler("validatevalue",[{value:e+"-"+r,valueAsDate:n.asDate(e+"-"+r),isPartial:M&&[e,r]}])?l=' disabled=""':(l="",I++),e==c[0]&&c[1]==r&&m.push("this-value"),D[0]==e&&D[1]==r&&m.push("checked-value"),h=m.length?' class="'+m.join(" ")+'"':"",!a||a%x||(k++,u.push('</tr><tr class="ws-row-'+k+'">')),u.push('<td class="ws-item-'+a+'" role="presentation"><button data-id="month-'+a+'" type="button"'+l+h+' data-action="'+F+'" value="'+e+"-"+r+'" tabindex="-1" role="gridcell" aria-label="'+v.date.monthNames[a]+'">'+s+"</button></td>");T+='<div class="picker-grid"><table role="grid" aria-label="'+e+'"><tbody><tr class="ws-row-0">'+u.join("")+"</tr></tbody></table></div></div>"}return{enabled:I,main:T,prev:p,next:d,type:"Grid"}},o.getDayList=function(e,n){var i,a,s,r,l,p,d,h,m,f,g,w,y,x,D,I,k,T,F,_,M,E=n.options,N=E.size,L=E.maxS,B=E.minS,S=E.value.split("T")[0].split("-"),A=v.date,P=[],V=new Date(e[0],e[1]-1,1),C="datetime-local"==n.type?"setTimeList":"changeInput",j=n.orig&&"validatevalue"in t.data(n.orig),Y="changeInput"!=C;for(V.setMonth(V.getMonth()-Math.floor((N-1)/2)),h=[1*e[0]+1,e[1]],h=o.isInRange(h,L,B)?{"data-action":"setDayList",value:h.join("-")}:!1,m=[1*e[0]-1,e[1]],m=o.isInRange(m,L,B)?{"data-action":"setDayList",value:m.join("-")}:!1,i=0;N>i;i++){for(V.setDate(1),y=V.getMonth(),w=0,i||(_=new Date(V.getTime()),_.setDate(-1),I=u(_),p=o.isInRange(I,L,B)?{"data-action":"setDayList",value:I[0]+"-"+I[1]}:!1),I=u(V),P.push('<div class="day-list picker-list ws-index-'+i+'"><div class="ws-picker-header">'),k=['<select data-action="setDayList" class="month-select" tabindex="0">'+o.createMonthSelect(I,L,B).join("")+"</select>",'<select data-action="setDayList" class="year-select" tabindex="0">'+o.createYearSelect(I[0],L,B,"-"+I[1]).join("")+"</select>"],v.date.showMonthAfterYear&&k.reverse(),P.push(k.join(" ")),T=[A.monthNames[1*I[1]-1],I[0]],A.showMonthAfterYear&&T.reverse(),P.push('<button data-action="setMonthList"'+(E.minView>=2?' disabled="" ':"")+' value="'+I.date+'" tabindex="-1">'+b(1*I[1]-1,I[0])+"</button>"),P.push('</div><div class="picker-grid"><table role="grid" aria-label="'+T.join(" ")+'"><thead><tr>'),P.push('<th class="week-header ws-week">'+A.weekHeader+"</th>"),s=A.firstDay;s<A.dayNamesShort.length;s++)P.push('<th class="day-'+s+'"><abbr title="'+A.dayNames[s]+'">'+A.dayNamesShort[s]+"</abbr></th>");for(s=A.firstDay;s--;)P.push('<th class="day-'+s+'"><abbr title="'+A.dayNames[s]+'">'+A.dayNamesShort[s]+"</abbr></th>");for(P.push('</tr></thead><tbody><tr class="ws-row-0">'),g=o.getWeek(V),P.push('<td class="week-cell ws-week" role="gridcell" aria-disabled="true">'+g+"</td>"),a=0;99>a;a++){if(f=a&&!(a%7),x=V.getMonth(),D=y!=x,r=V.getDay(),M=[],f&&D&&w>=5){P.push("</tr>");break}f&&(w++,P.push('</tr><tr class="ws-row-'+w+(D?" other-month-row":"")+'">'),g++,g>52&&(g=o.getWeek(V)),P.push('<td class="week-cell ws-week" role="gridcell" aria-disabled="true">'+g+"</td>")),a||r!=v.date.firstDay&&(l=r-v.date.firstDay,0>l&&(l+=7),V.setDate(V.getDate()-l),r=V.getDay(),x=V.getMonth(),D=y!=x),I=u(V),F='<td role="presentation" class="day-'+r+'"><button data-id="day-'+V.getDate()+'" role="gridcell" data-action="'+C+'" value="'+I.join("-")+'" type="button"',D?M.push("othermonth"):M.push("day-"+V.getDate()),I[0]==c[0]&&c[1]==I[1]&&c[2]==I[2]&&M.push("this-value"),S[0]==I[0]&&I[1]==S[1]&&I[2]==S[2]&&M.push("checked-value"),M.length&&(F+=' class="'+M.join(" ")+'"'),(!o.isInRange(I,L,B)||j&&t(n.orig).triggerHandler("validatevalue",[{value:I.join("-"),valueAsDate:V,isPartial:Y&&I}]))&&(F+=' disabled=""'),P.push(F+' tabindex="-1">'+V.getDate()+"</button></td>"),V.setDate(V.getDate()+1)}P.push("</tbody></table></div></div>"),i==N-1&&(I=u(V),I[2]=1,d=o.isInRange(I,L,B)?{"data-action":"setDayList",value:I.date}:!1)}return{enabled:9,main:P.join(""),prev:p,next:d,yearPrev:m,yearNext:h,type:"Grid"}},o.getTimeList=function(n,i){var a,s,o,r,u,c='<div class="time-list picker-list ws-index-0">',p=0,d=0,h=23,m={min:t.prop(i.orig,"min"),max:t.prop(i.orig,"max"),step:t.prop(i.orig,"step")},f=i.orig&&"validatevalue"in t.data(i.orig),g="";for("time"==i.type?a='<button type="button" disabled="">'+t.trim(t(i.orig).jProp("labels").text()||"").replace(/[\:\*]/g,"")+"</button>":(s=n[2].split("T"),n[2]=s[0],s[1]&&(n[3]=s[1]),g=' aria-label="'+n[2]+". "+v.date.monthNames[1*n[1]-1]+" "+n[0]+'"',a=b(1*n[1]-1,n[0],n[2]+". "),a='<button tabindex="-1" data-action="setDayList" value="'+n[0]+"-"+n[1]+"-"+n[2]+'" type="button">'+a+"</button>",u=n[0]+"-"+n[1]+"-"+n[2]+"T"),c+='<div class="ws-picker-header">'+a+"</div>",c+='<div class="picker-grid"><table role="grid"'+g+"><tbody><tr>";h>=p;p++)o=l.addZero(""+p)+":00",r=u?u+o:o,!p||p%4||(d++,c+='</tr><tr class="ws-row-'+d+'">'),c+='<td role="presentation"><button role="gridcell" data-action="changeInput" value="'+r+'" type="button" tabindex="-1"',(!i.isValid(r,m)||f&&t(i.orig).triggerHandler("validatevalue",[{value:r,valueAsDate:i.asDate(r),partial:!1}]))&&(c+=' disabled=""'),n==o&&(c+=' class="checked-value"'),c+=">"+e._format.time(o)+"</button></td>";return c+="</tr></tbody></table></div></div>",{enabled:9,main:c,prev:!1,next:!1,type:"Grid"}},o.isInRange=function(t,e,n){var i,a=!0;for(i=0;i<t.length;i++){if(n[i]&&n[i]>t[i]){a=!1;break}if(!n[i]||n[i]!=t[i])break}if(a)for(i=0;i<t.length;i++){if(e[i]&&e[i]<t[i]){a=!1;break}if(!e[i]||e[i]!=t[i])break}return a},o.createMonthSelect=function(t,e,n,i){i||(i=v.date.monthNames);for(var a,s=0,r=[],u=t[1]-1;s<i.length;s++)a=u==s?' selected=""':"",(a||o.isInRange([t[0],s+1],e,n))&&r.push('<option value="'+t[0]+"-"+l.addZero(s+1)+'"'+a+">"+i[s]+"</option>");return r},function(){var n=function(t){return"get"+t+"List"},i=function(t){return"set"+t+"List"},a={date:"Day",week:"Day",month:"Month","datetime-local":"Time",time:"Time"},s=function(t,e,n){t[n]?e[n+"Element"].attr(t[n]).prop({disabled:!1}).prop(t[n]):e[n+"Element"].removeAttr("data-action").prop({disabled:!0})};t.each({setYearList:["Year","Month","Day","Time"],setMonthList:["Month","Day","Time"],setDayList:["Day","Time"],setTimeList:["Time"]},function(l,u){var c=u.map(n),p=u.map(i);r[l]=function(n,i,r,l){n=""+n;var d=r.options,h=n.split("-");l||(l=0),t.each(c,function(n,c){if(n>=l){var v=o[c](h,r);if(h.length<2||v.enabled>1||v.prev||v.next||a[r.type]===u[n])return i.element.attr({"data-currentview":p[n]}).addClass("ws-size-"+d.size).data("pickercontent",{data:r,content:v,values:h}),i.bodyElement.html(v.main),s(v,i,"prev"),s(v,i,"next"),s(v,i,"yearPrev"),s(v,i,"yearNext"),t(d.orig).trigger("pickerchange"),e[v.type]&&new e[v.type](i.bodyElement.children(),i,v),i.element.filter('[data-vertical="bottom"]').triggerHandler("pospopover"),!1}})}})}(),o.showPickerContent=function(t,e){var n=t.options,i=t._popoverinit;t._popoverinit=!0,i||(o.commonInit(t,e),o.commonDateInit(t,e)),e.element.triggerHandler("updatepickercontent"),!i||n.restartView?r.setYearList(n.defValue||n.value,e,t,n.startView):r[e.element.attr("data-currentview")||"setYearList"](n.defValue||n.value,e,t,0),t._popoverinit=!0},o.commonDateInit=function(n,a){if(!n._commonDateInit){n._commonDateInit=!0;var s=n.options,l=function(){return t(this).is(".othermonth")&&"pointer"!=t(this).css("cursor")||a.actionFn({"data-action":t.attr(this,"data-action"),value:t(this).val()||t.attr(this,"value")}),!1},u=(new Date).getTime(),p=function(i){var s=[],r="",l="";i.options=n.getOptions()||{},t("div.ws-options",a.contentElement).remove(),t.each(i.options[0],function(t,e){var a=o.isInRange(t.split("-"),i.maxS,i.minS)?"":' disabled="" ';e&&(e=' <span class="ws-label">'+e+"</span>"),s.push('<li role="presentation"><button value="'+t+'" '+a+' data-action="changeInput" tabindex="-1"  role="option"><span class="ws-value">'+n.formatValue(t,!1)+"</span>"+e+"</button></li>")}),s.length&&(u++,i.options[1]&&(l="datalist-"+u,r='<h5 id="'+l+'">'+i.options[1]+"</h5>",l=' aria-labelledbyid="'+l+'" '),new e.ListBox(t('<div class="ws-options">'+r+'<ul role="listbox" '+l+">"+s.join("")+"</div>").insertAfter(a.bodyElement)[0],a,{noFocus:!0}))},d=function(){var i;a.isDirty&&(a.isDirty=!1,i=s.max.split("T"),s.maxS=i[0].split("-"),i[1]&&s.maxS.push(i[1]),i=s.min.split("T"),s.minS=i[0].split("-"),i[1]&&s.minS.push(i[1]),t("button",a.buttonRow).each(function(){var i;t(this).is(".ws-empty")?(i=v.date.clear,i||(i=h[""].date.clear||"clear",e.warn("could not get clear text from form cfg"))):t(this).is(".ws-current")&&(i=(v[n.type]||{}).currentText,i||(i=(h[""][[n.type]]||{}).currentText||(v.date||{}).currentText||"current",e.warn("could not get currentText from form cfg for "+n.type)),c[n.type]&&"time"!=n.type&&t.prop(this,"disabled",!o.isInRange(c[n.type].split("-"),s.maxS,s.minS)||!!t(n.orig).triggerHandler("validatevalue",[{value:c[n.type],valueAsDate:new Date,isPartial:!1}]))),i&&t(this).text(i).attr({"aria-label":i})}),a.nextElement.attr({"aria-label":v.date.nextText}),a.prevElement.attr({"aria-label":v.date.prevText}),a.yearNextElement.attr({"aria-label":v.date.nextText}),a.yearPrevElement.attr({"aria-label":v.date.prevText}),a.contentElement.attr({dir:v.date.isRTL?"rtl":"ltr",lang:e.formcfg.__activeName}),p(s,s.maxS,s.minS),a.isVisible&&o.showPickerContent(n,a)),t("button.ws-empty",a.buttonRow).prop("disabled",t.prop(n.orig,"required")),a.isDirty=!1};"time"==n.type&&(s.minView=3,s.startView=3),s.minView||(s.minView=0),s.startView<s.minView&&(s.startView=s.minView,e.warn("wrong config for minView/startView.")),s.size||(s.size=1),a.actionFn=function(i){var o;r[i["data-action"]]?("changeInput"==i["data-action"]&&s.inlinePicker&&s.updateOnInput&&(n._handledValue=!0,s.size>1&&(o=t('button[value="'+i.value+'"]',a.bodyElement),o.filter(":not(.othermonth)").length?(t("button.checked-value",a.bodyElement).removeClass("checked-value"),o.addClass("checked-value").trigger("focus"),s.updateOnInput=!1):o=!1)),r[i["data-action"]](i.value,a,n,0),n._handledValue&&(delete n._handledValue,o&&(s.updateOnInput=!0))):e.warn("no action for "+i["data-action"])},a.contentElement.html('<div class="prev-controls ws-picker-controls"><button class="ws-super-prev ws-year-btn" tabindex="0" type="button"></button><button class="ws-prev" tabindex="0" type="button"></button></div> <div class="next-controls ws-picker-controls"><button class="ws-next" tabindex="0" type="button"></button><button class="ws-super-next ws-year-btn" tabindex="0" type="button"></button></div><div class="ws-picker-body"></div><div class="ws-button-row"><button type="button" class="ws-current" data-action="changeInput" value="'+c[n.type]+'" tabindex="0"></button> <button type="button" data-action="changeInput" value="" class="ws-empty" tabindex="0"></button></div>'),a.nextElement=t("button.ws-next",a.contentElement),a.prevElement=t("button.ws-prev",a.contentElement),a.yearNextElement=t("button.ws-super-next",a.contentElement),a.yearPrevElement=t("button.ws-super-prev",a.contentElement),a.bodyElement=t("div.ws-picker-body",a.contentElement),a.buttonRow=t("div.ws-button-row",a.contentElement),a.element.on("updatepickercontent",d),a.contentElement.wsTouchClick("button[data-action]",l).on("change","select[data-action]",l),t(s.orig).on("input",function(){var t;s.updateOnInput&&a.isVisible&&s.value&&(t=a.element.attr("data-currentview"))&&r[t](n.options.value,a,n,0)}),t(i).onTrigger("wslocalechange",n._propertyChange),null==s.updateOnInput&&(s.inlinePicker||s.noChangeDismiss)&&(s.updateOnInput=!0),s.inlinePicker&&(a.element.attr("data-class",t.prop(n.orig,"className")),a.element.attr("data-id",t.prop(n.orig,"id"))),t(s.orig).trigger("pickercreated")}}});