webshims.register("form-shim-extend2",function(e,t,a,r,n,o){"use strict";var i=function(e){return"number"==typeof e||e&&e==1*e},s=t.support,l=!("getSetAttribute"in e.support&&!e.support.getSetAttribute),u=!("submitBubbles"in e.support)||e.support.submitBubbles,d=function(t){u||!t||"object"!=typeof t||t._submit_attached||(e.event.add(t,"submit._submit",function(e){e._submit_bubble=!0}),t._submit_attached=!0)};if(!u&&e.event.special.submit&&(e.event.special.submit.setup=function(){return e.nodeName(this,"form")?!1:(e.event.add(this,"click._submit keypress._submit",function(t){var a=t.target,r=e.nodeName(a,"input")||e.nodeName(a,"button")?e.prop(a,"form"):n;d(r)}),void 0)}),t.reflectProperties(["input"],["pattern"]),!("maxLength"in r.createElement("textarea"))){var p=function(){var t,a=0,r=e([]),n=1e9,o=function(){var e=r.prop("value"),t=e.length;t>a&&t>n&&(t=Math.max(a,n),r.prop("value",e.substr(0,t))),a=t},i=function(){clearTimeout(t),r.off(".maxlengthconstraint")};return function(s,l){i(),l>-1&&(n=l,a=e.prop(s,"value").length,r=e(s),r.on({"keydown.maxlengthconstraint keypress.maxlengthconstraint paste.maxlengthconstraint cut.maxlengthconstraint":function(){setTimeout(o,0)},"keyup.maxlengthconstraint":o,"blur.maxlengthconstraint":i}),t=setInterval(o,200))}}();p.update=function(t,a){e(t).is(":focus")&&(a||(a=e.prop(t,"maxlength")),p(t,a))},e(r).on("focusin",function(t){var a;"TEXTAREA"==t.target.nodeName&&(a=e.prop(t.target,"maxlength"))>-1&&p(t.target,a)}),t.defineNodeNameProperty("textarea","maxlength",{attr:{set:function(e){this.setAttribute("maxlength",""+e),p.update(this)},get:function(){var e=this.getAttribute("maxlength");return null==e?n:e}},prop:{set:function(e){if(i(e)){if(0>e)throw"INDEX_SIZE_ERR";return e=parseInt(e,10),this.setAttribute("maxlength",e),p.update(this,e),void 0}this.setAttribute("maxlength","0"),p.update(this,0)},get:function(){var e=this.getAttribute("maxlength");return i(e)&&e>=0?parseInt(e,10):-1}}}),t.defineNodeNameProperty("textarea","maxLength",{prop:{set:function(t){e.prop(this,"maxlength",t)},get:function(){return e.prop(this,"maxlength")}}})}l||null!=e("<form novalidate></form>").attr("novalidate")||t.defineNodeNameProperty("form","novalidate",{attr:{set:function(e){this.setAttribute("novalidate",""+e)},get:function(){var e=this.getAttribute("novalidate");return null==e?n:e}}}),s.fieldsetdisabled&&s.fieldsetelements||function(){if(!s.fieldsetdisabled){var o={fieldset:1,FIELDSET:1},i="input, textarea, select, button";e.extend(e.expr[":"],{enabled:function(a){return a.disabled===!1||o[a.nodeName]&&null==t.contentAttr(a,"disabled")&&!e(a).is("fieldset[disabled] *")},disabled:function(a){return a.disabled===!0||o[a.nodeName]&&(null!=t.contentAttr(a,"disabled")||e(a).is("fieldset[disabled] *"))}});var l={disable:function(){this.disabled||(t.data(this,"groupedisabled",!0),this.disabled=!0)},enable:function(){this.disabled&&t.data(this,"groupedisabled")&&(t.data(this,"groupedisabled",!1),this.disabled=!1)}};e(a).on("unload",function(){e(i).each(l.enable)}),t.defineNodeNamesBooleanProperty(["fieldset"],"disabled",{set:function(t){if(t=!!t)e(this.querySelectorAll(i)).each(l.disable);else if(!e(this).is("fieldset[disabled] *")){var a=e(this.querySelectorAll(i));this.querySelector("fieldset[disabled]")&&(a=a.not("fieldset[disabled] *")),a.each(l.enable)}},initAttr:!0,useContentAttribute:!0}),["input","textarea","select","button"].forEach(function(a){var r=t.defineNodeNameProperty(a,"disabled",{prop:{set:function(a){a?(t.data(this,"groupedisabled",!1),r.prop._supset.call(this,a)):e(this).is("fieldset[disabled] *")?(t.data(this,"groupedisabled",!0),r.prop._supset.call(this,!0)):(t.data(this,"groupedisabled",!1),r.prop._supset.call(this,a))},get:function(){var e=r.prop._supget.call(this);return e?!t.data(this,"groupedisabled"):e}},removeAttr:{value:function(){r.prop.set.call(this,!1)}}})}),t.addReady(function(t){e(t).filter("fieldset[disabled], fieldset[disabled] *").find(i).each(l.disable)})}!function(t,a){var n={form:1,FORM:1};e.prop=function(o,i,s){var l;return o&&1==o.nodeType&&s===a&&n[o.nodeName]&&o.id&&(l=r.getElementsByName(i),l&&l.length||(l=r.getElementById(i)),l&&(l=e(l).filter(function(){return e.prop(this,"form")==o}).get(),l.length))?1==l.length?l[0]:l:t.apply(this,arguments)}}(e.prop,n);var u=function(t){var a=e.data(t,"webshimsAddedElements");a&&(a.remove(),e.removeData(t,"webshimsAddedElements"))},p=function(){var a=t.contentAttr(this,"form");return a&&(a=r.getElementById(a),a&&!e.nodeName(a,"form")&&(a=null)),a||this.form};if(t.defineNodeNamesProperty(["input","textarea","select","button","fieldset"],"form",{prop:{get:p,writeable:!1}}),t.defineNodeNamesProperty(["form"],"elements",{prop:{get:function(){var t,a,n,o,i,s,l=this.id,u=[];if(l&&(n=e.data(this,"webshimsAddedElements"),n&&n.detach()),o=this.elements,this.querySelector("input[form], select[form], textarea[form]"))for(i=0,s=o.length;s>i;i++)p.call(o[i])==this&&u.push(o[i]);else u=e.makeArray(o);return l&&(t='input[form="'+l+'"], select[form="'+l+'"], textarea[form="'+l+'"], button[form="'+l+'"], fieldset[form="'+l+'"]',a=r.querySelectorAll(t)||[],a.length&&(u=e(u).add(a).get()),n&&n.appendTo(this)),u},writeable:!1}}),e(function(){var a=function(e){e.stopPropagation()},n={image:1,submit:1};e(r).on("submit",function(t){if(!t.isDefaultPrevented()){var a,n=t.target,o=n.id;o&&(u(n),a=r.querySelectorAll('input[form="'+o+'"], select[form="'+o+'"], textarea[form="'+o+'"]'),a=e(a).filter(function(){return!this.disabled&&this.name&&this.form!=n}).clone(),a.length&&(e.data(n,"webshimsAddedElements",e('<div class="webshims-visual-hide" />').append(a).appendTo(n)),setTimeout(function(){u(n)},9)),a=null)}}),e(r).on("click",function(r){if(n[r.target.type]&&!r.isDefaultPrevented()&&t.contentAttr(r.target,"form")){var o,i=e.prop(r.target,"form"),s=r.target.form;i&&i!=s&&(o=e(r.target).clone().removeAttr("form").addClass("webshims-visual-hide").on("click",a).appendTo(i),s&&r.preventDefault(),d(i),o.trigger("click"),setTimeout(function(){o.remove(),o=null},9))}})}),!e.fn.finish&&parseFloat(e.fn.jquery,10)<1.9){var c=/\r?\n/g,f=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,m=/^(?:select|textarea)/i;e.fn.serializeArray=function(){return this.map(function(){var t=e.prop(this,"elements");return t?e.makeArray(t):this}).filter(function(){return this.name&&!e(this).is(":disabled")&&(this.checked||m.test(this.nodeName)||f.test(this.type))}).map(function(t,a){var r=e(this).val();return null==r?null:e.isArray(r)?e.map(r,function(e){return{name:a.name,value:e.replace(c,"\r\n")}}):{name:a.name,value:r.replace(c,"\r\n")}}).get()}}s.fieldsetelements||t.defineNodeNamesProperty(["fieldset"],"elements",{prop:{get:function(){return this.querySelectorAll("input, select, textarea, button, fieldset")||[]},writeable:!1}})}(),null==e("<input />").prop("labels")&&t.defineNodeNamesProperty("button, input, keygen, meter, output, progress, select, textarea","labels",{prop:{get:function(){if("hidden"==this.type)return null;var t=this.id,a=e(this).closest("label").filter(function(){var e=this.attributes["for"]||{};return!e.specified||e.value==t});return t&&(a=a.add(r.querySelectorAll('label[for="'+t+'"]'))),a.get()},writeable:!1}}),"value"in r.createElement("progress")||function(){var a=parseInt("NaN",10),r=function(t){var a=e.prop(t,"position");e.attr(t,"data-position",a),e("> span",t).css({width:(0>a?100:100*a)+"%"})},n={position:{prop:{get:function(){var t,n=this.getAttribute("value"),o=-1;return n=n?1*n:a,isNaN(n)?r.isInChange&&e(this).removeAttr("aria-valuenow").addClass("ws-indeterminate"):(t=e.prop(this,"max"),o=Math.max(Math.min(n/t,1),0),r.isInChange&&(e.attr(this,"aria-valuenow",100*o),"max"==r.isInChange&&e.attr(this,"aria-valuemax",t)),e(this).removeClass("ws-indeterminate")),o},writeable:!1}}};e.each({value:0,max:1},function(a,o){var i="value"==a&&!e.fn.finish;n[a]={attr:{set:function(e){var t=n[a].attr._supset.call(this,e);return r.isInChange=a,r(this),r.isInChange=!1,t}},removeAttr:{value:function(){if(this.removeAttribute(a),i)try{delete this.value}catch(e){}r.isInChange=a,r(this),r.isInChange=!1}},prop:{get:function(){var t=1*n[a].attr.get.call(this);return 0>t||isNaN(t)?t=o:"value"==a?t=Math.min(t,e.prop(this,"max")):0===t&&(t=o),t},set:function(e){return e=1*e,isNaN(e)&&t.error("Floating-point value is not finite."),n[a].attr.set.call(this,e)}}}}),t.createElement("progress",function(){var a=e(this).attr({role:"progressbar","aria-valuemin":"0"}).html('<span class="progress-value" />').jProp("labels").map(function(){return t.getID(this)}).get();a.length?e.attr(this,"aria-labelledby",a.join(" ")):t.info("you should use label elements for your prgogress elements"),e(this).addClass("ws-style"),"rtl"==e(this).css("direction")&&e(this).addClass("ws-is-rtl"),r.isInChange="max",r(this),r.isInChange=!1},n)}(),"setSelectionRange"in r.createElement("input")||function(){var a=function(t,a){var n,o,i,s,l,u,d=0,p=0;return r.selection&&(n=r.selection.createRange())&&n.parentElement()==t&&(o=e.prop(t,"value"),l=o.length,i=o.replace(/\r\n/g,"\n"),s=t.createTextRange(),s.moveToBookmark(n.getBookmark()),u=t.createTextRange(),u.collapse(!1),s.compareEndPoints("StartToEnd",u)>-1?d=p=l:a?(d=-s.moveStart("character",-l),d+=i.slice(0,d).split("\n").length-1):s.compareEndPoints("EndToEnd",u)>-1?p=l:(p=-s.moveEnd("character",-l),p+=i.slice(0,p).split("\n").length-1)),{start:d,end:p}};["input","textarea"].forEach(function(r){var n="textarea"==r,o={text:1,search:1,url:1,tel:1,password:1,email:1},i="InvalidStateError: An attempt was made to use an object that is not, or is no longer, usable. selection not allowed on this type";t.defineNodeNameProperties(r,{selectionStart:{get:function(){return n||o[e.prop(this,"type")]?a(this,!0).start:(t.error(i),void 0)},set:function(a){if(this.createTextRange&&(n||o[e.prop(this,"type")])){var r=this.createTextRange();r.collapse(!0),r.moveStart("character",a),r.moveEnd("character",e.prop(this,"selectionEnd")),e(this).is(":focus")&&r.select()}else t.error(i)}},selectionEnd:{get:function(){return n||o[e.prop(this,"type")]?a(this).end:(t.error(i),void 0)},set:function(r){if(this.createTextRange&&(n||o[e.prop(this,"type")])){var s,l=this.createTextRange();l.collapse(!0),s=a(this,!0).start,l.moveStart("character",s),l.moveEnd("character",r-s),e(this).is(":focus")&&l.select()}else t.error(i)}},setSelectionRange:{value:function(a,r){if(this.createTextRange&&(n||o[e.prop(this,"type")])){var s=this.createTextRange();s.collapse(!0),s.moveStart("character",a),s.moveEnd("character",r-a),e(this).is(":focus")&&s.select()}else t.error(i)}}},"prop")})}(),function(){if(!o.noPlaceholderPolyfill){var r;if(s.textareaPlaceholder=!!("placeholder"in e("<textarea />")[0]),s.placeholder=!!("placeholder"in e("<input />")[0]),s.placeholder&&o.overridePlaceholder&&(r=!0),s.placeholder&&s.textareaPlaceholder&&!r)return function(){var t=navigator.userAgent;-1!=t.indexOf("Mobile")&&-1!=t.indexOf("Safari")&&e(a).on("orientationchange",function(){var t,a=function(e,t){return t},r=function(){e("input[placeholder], textarea[placeholder]").attr("placeholder",a)};return function(){clearTimeout(t),t=setTimeout(r,9)}}())}(),void 0;var n="over"==t.cfg.forms.placeholderType,i=t.cfg.forms.responsivePlaceholder,l=["textarea"];(!s.placeholder||r)&&l.push("input");var u=function(t){try{return e(t).setSelectionRange(0,0),!0}catch(a){}},d=function(t,a,r,o){if(r===!1&&(r=e.prop(t,"value")),n||"password"==t.type){if(!r&&o)return e(t).off(".placeholderremove").on({"keydown.placeholderremove keypress.placeholderremove paste.placeholderremove input.placeholderremove":function(r){(!r||17!=r.keyCode&&16!=r.keyCode)&&(a.box.removeClass("placeholder-visible"),e(t).off(".placeholderremove"))},"blur.placeholderremove":function(){e(t).off(".placeholderremove")}}),void 0}else{if(!r&&o&&u(t)){var i=setTimeout(function(){u(t)},9);return e(t).off(".placeholderremove").on({"keydown.placeholderremove keypress.placeholderremove paste.placeholderremove input.placeholderremove":function(r){(!r||17!=r.keyCode&&16!=r.keyCode)&&(t.value=e.prop(t,"value"),a.box.removeClass("placeholder-visible"),clearTimeout(i),e(t).off(".placeholderremove"))},"mousedown.placeholderremove drag.placeholderremove select.placeholderremove":function(){u(t),clearTimeout(i),i=setTimeout(function(){u(t)},9)},"blur.placeholderremove":function(){clearTimeout(i),e(t).off(".placeholderremove")}}),void 0}o||r||!t.value||(t.value=r)}a.box.removeClass("placeholder-visible")},p=function(t,a,r){r===!1&&(r=e.prop(t,"placeholder")),n||"password"==t.type||(t.value=r),a.box.addClass("placeholder-visible")},c=function(t,a,r,o,i){if(o||(o=e.data(t,"placeHolder"))){var s=e(t).hasClass("placeholder-visible");return r===!1&&(r=e.attr(t,"placeholder")||""),e(t).off(".placeholderremove"),a===!1&&(a=e.prop(t,"value")),a||"focus"!=i&&(i||!e(t).is(":focus"))?a?(d(t,o,a),void 0):(r&&!a?p(t,o,r):d(t,o,a),void 0):(("password"==t.type||n||s)&&d(t,o,"",!0),void 0)}},f=function(){return e('<span class="placeholder-text"></span>')},m=function(){var r={text:1,search:1,url:1,email:1,password:1,tel:1,number:1};return t.modules["form-number-date-ui"].loaded&&delete r.number,{create:function(t){var r,o=e.data(t,"placeHolder");if(o)return o;if(o=e.data(t,"placeHolder",{}),e(t).on("focus.placeholder blur.placeholder",function(e){c(this,!1,!1,o,e.type),o.box["focus"==e.type?"addClass":"removeClass"]("placeholder-focused")}),(r=e.prop(t,"form"))&&e(t).onWSOff("reset.placeholder",function(e){setTimeout(function(){c(t,!1,!1,o,e.type)},0)},!1,r),"password"==t.type||n)o.text=f(t),i||e(t).is(".responsive-width")||-1!=(t.currentStyle||{width:""}).width.indexOf("%")?o.box=o.text:(o.box=e('<span class="placeholder-box placeholder-box-'+(t.nodeName||"").toLowerCase()+" placeholder-box-"+e.css(t,"float")+'" />').insertAfter(t),o.box.append(t)),o.text.insertAfter(t).on("mousedown.placeholder",function(){c(this,!1,!1,o,"focus");try{setTimeout(function(){t.focus()},0)}catch(e){}return!1}),e.each(["lineHeight","fontSize","fontFamily","fontWeight"],function(a,r){var n=e.css(t,r);o.text.css(r)!=n&&o.text.css(r,n)}),e.each(["Left","Top"],function(a,r){var n=(parseInt(e.css(t,"padding"+r),10)||0)+Math.max(parseInt(e.css(t,"margin"+r),10)||0,0)+(parseInt(e.css(t,"border"+r+"Width"),10)||0);o.text.css("padding"+r,n)}),e(t).onWSOff("updateshadowdom",function(){var a,r,n,i=e(t),s={};return function(){var e,l;(e=t.offsetWidth)&&(l=function(){var t=i.position();e!==a&&(a=e,o.text[0].style.width=e+"px"),(t.top!==s.top||t.left!==s.left)&&(s=t,o.text[0].style.top=t.top+"px",o.text[0].style.left=t.left+"px")},r?(clearTimeout(n),n=setTimeout(l,99)):(l(),r=!0))}}(),!0);else{var s=function(a){e(t).hasClass("placeholder-visible")&&(d(t,o,""),setTimeout(function(){(!a||"submit"!=a.type||a.isDefaultPrevented())&&c(t,!1,!1,o)},9))};e(t).onWSOff("beforeunload",s,!1,a),o.box=e(t),r&&e(t).onWSOff("submit",s,!1,r)}return o},update:function(a,n){var o=(e.attr(a,"type")||e.prop(a,"type")||"").toLowerCase();if(!r[o]&&!e.nodeName(a,"textarea"))return t.warn('placeholder not allowed on input[type="'+o+'"], but it is a good fallback :-)'),void 0;var i=m.create(a);i.text&&i.text.text(n),c(a,!1,n,i)}}}();e.webshims.publicMethods={pHolder:m},l.forEach(function(e){t.defineNodeNameProperty(e,"placeholder",{attr:{set:function(e){var a=this;r?(t.data(a,"bustedPlaceholder",e),a.placeholder=""):t.contentAttr(a,"placeholder",e),m.update(a,e)},get:function(){var e;return r&&(e=t.data(this,"bustedPlaceholder")),e||t.contentAttr(this,"placeholder")}},reflect:!0,initAttr:!0})}),l.forEach(function(a){var n,o={};["attr","prop"].forEach(function(a){o[a]={set:function(o){var i,s=this;r&&(i=t.data(s,"bustedPlaceholder")),i||(i=t.contentAttr(s,"placeholder")),e.removeData(s,"cachedValidity");var l=n[a]._supset.call(s,o);return i&&"value"in s&&c(s,o,i),l},get:function(){var r,o,i=this;return e(i).hasClass("placeholder-visible")?t.cfg.debug&&(o=n[a]._supget.call(i))&&(r=e.attr(i,"placeholder"))&&r!=o?(t.error("value input[placeholder] was changed by input.value instead using $.val or $.prop."),c(i,o,r)):o="":o=n[a]._supget.call(i),o}}}),n=t.defineNodeNameProperty(a,"value",o)})}}(),function(){var a=r;if(!("value"in r.createElement("output"))){t.defineNodeNameProperty("output","value",{prop:{set:function(t){var a=e.data(this,"outputShim");a||(a=n(this)),a(t)},get:function(){return t.contentAttr(this,"value")||e(this).text()||""}}}),t.onNodeNamesPropertyModify("input","value",function(t,a,r){if("removeAttr"!=r){var n=e.data(this,"outputShim");n&&n(t)}});var n=function(a){if(!e.data(a,"outputShim")){a=e(a);var n=(a.text()||"").trim(),o=a.prop("id"),i=a.attr("for"),s=e('<input class="output-shim" type="text" disabled name="'+(a.attr("name")||"")+'" value="'+n+'" style="display: none !important;" />').insertAfter(a),l=function(e){s[0].value=e,e=s[0].value,a.text(e),t.contentAttr(a[0],"value",e)};return a[0].defaultValue=n,t.contentAttr(a[0],"value",n),a.attr({"aria-live":"polite"}),o&&(s.attr("id",o),a.attr("aria-labelledby",a.jProp("labels").map(function(){return t.getID(this)}).get().join(" "))),i&&(o=t.getID(a),i.split(" ").forEach(function(e){e=r.getElementById(e),e&&e.setAttribute("aria-controls",o)})),a.data("outputShim",l),s.data("outputShim",l),l}};t.addReady(function(t,a){e(t.getElementsByTagName("output")).add(a.filter("output")).each(function(){n(this)})}),function(){var r,n,o,i,s={updateInput:1,input:1},l={radio:1,checkbox:1,submit:1,button:1,image:1,reset:1,file:1,color:1},u={input:1,INPUT:1,textarea:1,TEXTAREA:1},d=function(e){if(o){var a=o.prop("value");a!==n&&(n=a,e&&s[e.type]||t.triggerInlineForm&&t.triggerInlineForm(o[0],"input"))}},p=function(){clearTimeout(i),i=setTimeout(d,9)},c=function(){clearTimeout(i),clearInterval(r),o&&o.off("focusout",c).off("keyup keypress keydown paste cut",p).off("input change updateInput triggerinput",d)},f=function(e){c(),o=e,n=o.prop("value"),clearInterval(r),r=setInterval(d,200),p(),o.on({"keyup keypress keydown paste cut":p,"focusout wswidgetfocusout":c,"input updateInput change triggerinput":d})};e(a).on("focusin wswidgetfocusin",function(a){!a.target||a.target.readOnly||a.target.disabled||!u[a.target.nodeName]||l[a.target.type]||(t.data(a.target,"implemented")||{}).inputwidgets||f(e(a.target))})}()}}()}),webshim.register("filereader",function(e,t,a,r,n,o){"use strict";var i,s,l,u=e.noop,d='input[type="file"].ws-filereader',p=function(){t.loader.loadList(["moxie"])},c=function(){var a,r,n,o,s=this;t.implement(s,"filepicker")&&(s=this,a=e(this),n=a.parent(),o=function(){s.value||a.prop("value","")},a.attr("tabindex","-1").on("mousedown.filereaderwaiting click.filereaderwaiting",!1),n.addClass("ws-loading"),r=new i.FileInput({browse_button:this,accept:e.prop(this,"accept"),multiple:e.prop(this,"multiple")}),a.jProp("form").on("reset",function(){setTimeout(o)}),r.onready=function(){a.off(".fileraderwaiting"),n.removeClass("ws-waiting")},r.onchange=function(e){t.data(s,"fileList",e.target.files),a.trigger("change")},r.onmouseenter=function(){a.trigger("mouseover"),n.addClass("ws-mouseenter")},r.onmouseleave=function(){a.trigger("mouseout"),n.removeClass("ws-mouseenter")},r.onmousedown=function(){a.trigger("mousedown"),n.addClass("ws-active")},r.onmouseup=function(){a.trigger("mouseup"),n.removeClass("ws-active")},t.data(s,"filePicker",r),t.ready("WINDOWLOAD",function(){var e;a.onWSOff("updateshadowdom",function(){var t=s.offsetWidth;t&&e!=t&&(e=t,r.refresh())})}),t.addShadowDom(),r.init(),s.disabled&&r.disable(!0))},f=function(e){return e.name},m=function(){var a=this;p(),e(a).on("mousedown.filereaderwaiting click.filereaderwaiting",!1).parent().addClass("ws-loading"),t.ready("moxie",function(){m.call(a)})},h=/^(?:script|jsonp)$/i,v=function(){p(),t.error('filereader/formdata not ready yet. please wait for moxie to load `webshim.ready("moxie", callbackFn);`` or wait for the first change event on input[type="file"].ws-filereader.')},g=t.defineNodeNameProperty("input","value",{prop:{get:function(){var e=t.data(this,"fileList");return e&&e.map?e.map(f).join(", "):g.prop._supget.call(this)}}}),b=t.cfg.basePath+"moxie/",x='You nedd a crossdomain.xml to get all "filereader" / "XHR2" / "CORS" features to work. Or host moxie.swf/moxie.xap on your server an configure filereader options: "swfpath"/"xappath"',y=function(t){return"moxie"==t.wsType||t.data&&t.data instanceof i.FormData||t.crossDomain&&e.support.cors!==!1&&"no"!=l&&!h.test(t.dataType||"")},w=function(a){if(y(a)){var r;return t.info("moxie transfer used for $.ajax"),"no"==l&&t.error(x),{send:function(t,n){var i=function(e,t){if(a[t]){var n=!1;r.addEventListener("load",function(){n?n.lengthComputable&&n.total>n.loaded&&a[t]({type:"progress",lengthComputable:!0,total:n.total,loaded:n.total}):a[t]({type:"progress",lengthComputable:!0,total:1,loaded:1})}),e.addEventListener("progress",function(e){n=e,a[t](e)})}};r=new s.xhr.XMLHttpRequest,r.open(a.type,a.url,a.async,a.username,a.password),i(r.upload,o.uploadprogress),i(r.upload,o.progress),r.addEventListener("load",function(){var e={text:r.responseText,xml:r.responseXML};n(r.status,r.statusText,e,r.getAllResponseHeaders())}),a.xhrFields&&a.xhrFields.withCredentials&&(r.withCredentials=!0),a.timeout&&(r.timeout=a.timeout),e.each(t,function(e,t){r.setRequestHeader(e,t)}),r.send(a.data)},abort:function(){r&&r.abort()}}}},T={xdomain:function(){var a=/^https?:\/\//i,r=/^get|post$/i,n=new RegExp("^"+location.protocol,"i");return function(o,s){if(!(!o.crossDomain||o.username||o.xhrFields&&o.xhrFields.withCredentials||!o.async||!r.test(o.type)||!a.test(o.url)||!n.test(o.url)||o.data&&o.data instanceof i.FormData||h.test(o.dataType||""))){var l=null;return t.info("xdomain transport used."),{send:function(t,a){var r="",n=(s.dataType||"").toLowerCase();l=new XDomainRequest,/^\d+$/.test(s.timeout)&&(l.timeout=s.timeout),l.ontimeout=function(){a(500,"timeout")},l.onload=function(){var t="Content-Length: "+l.responseText.length+"\r\nContent-Type: "+l.contentType,r={code:l.status||200,message:l.statusText||"OK"},o={text:l.responseText,xml:l.responseXML};try{if("html"===n||/text\/html/i.test(l.contentType))o.html=l.responseText;else if("json"===n||"text"!==n&&/\/json/i.test(l.contentType))try{o.json=e.parseJSON(l.responseText)}catch(i){}else if("xml"===n&&!l.responseXML){var s;try{s=new ActiveXObject("Microsoft.XMLDOM"),s.async=!1,s.loadXML(l.responseText)}catch(i){}o.xml=s}}catch(u){}a(r.code,r.message,o,t)},l.onprogress=function(){},l.onerror=function(){a(500,"error",{text:l.responseText})},s.data&&(r="string"===e.type(s.data)?s.data:e.param(s.data)),l.open(o.type,o.url),l.send(r)},abort:function(){l&&l.abort()}}}}}(),moxie:function(e,a,r){if(y(e)){p(e);var n,o={send:function(i,s){n=!0,t.ready("moxie",function(){n&&(n=w(e,a,r),o.send=n.send,o.abort=n.abort,n.send(i,s))})},abort:function(){n=!1}};return o}}};o.progress||(o.progress="onprogress"),o.uploadprogress||(o.uploadprogress="onuploadprogress"),o.swfpath||(o.swfpath=b+"flash/Moxie.min.swf"),o.xappath||(o.xappath=b+"silverlight/Moxie.min.xap"),e.support.cors===!1&&a.XDomainRequest||delete T.xdomain,e.ajaxTransport("+*",function(e,t,a){var r,n;if((e.wsType||T[T])&&(r=T[T](e,t,a)),!r)for(n in T)if(r=T[n](e,t,a))break;return r}),t.defineNodeNameProperty("input","files",{prop:{writeable:!1,get:function(){return"file"!=this.type?null:(e(this).is(".ws-filereader")||t.info("please add the 'ws-filereader' class to your input[type='file'] to implement files-property"),t.data(this,"fileList")||[])}}}),t.reflectProperties(["input"],["accept"]),null==e("<input />").prop("multiple")&&t.defineNodeNamesBooleanProperty(["input"],["multiple"]),t.onNodeNamesPropertyModify("input","disabled",function(e,a){var r=t.data(this,"filePicker");r&&r.disable(a)}),t.onNodeNamesPropertyModify("input","value",function(a){""===a&&"file"==this.type&&e(this).hasClass("ws-filereader")&&t.data(this,"fileList",[])}),a.FileReader=v,a.FormData=v,t.ready("moxie",function(){var r="application/xml,xml";s=a.moxie,i=a.mOxie,i.Env.swf_url=o.swfpath,i.Env.xap_url=o.xappath,a.FileReader=i.FileReader,a.FormData=function(a){var r,n,o,s,l,u,d,p=new i.FormData;if(a&&e.nodeName(a,"form")){for(r=e(a).serializeArray(),n=0;n<r.length;n++)Array.isArray(r[n].value)?r[n].value.forEach(function(e){p.append(r[n].name,e)}):p.append(r[n].name,r[n].value);for(r=a.querySelectorAll('input[type="file"][name]'),n=0,o=r.length;n<r.length;n++)if(d=r[n].name,d&&!e(r[n]).is(":disabled")&&(s=e.prop(r[n],"files")||[],s.length))for((s.length>1||p.hasBlob&&p.hasBlob())&&t.error("FormData shim can only handle one file per ajax. Use multiple ajax request. One per file."),l=0,u=s.length;u>l;l++)p.append(d,s[l])}return p},u=a.FormData,m=c,T.moxie=w,o.mimeTypes=o.mimeTypes?r+","+o.mimeTypes:r;try{i.Mime.addMimeType(o.mimeTypes)}catch(n){t.warn("mimetype to moxie error: "+n)}}),t.addReady(function(t,a){e(t.querySelectorAll(d)).add(a.filter(d)).each(m)}),t.ready("WINDOWLOAD",p),t.cfg.debug!==!1&&o.swfpath.indexOf(location.protocol+"//"+location.hostname)&&o.swfpath.indexOf("https://"+location.hostname)&&t.ready("WINDOWLOAD",function(){var a=function(){"no"==l&&t.error(x)};try{l=sessionStorage.getItem("wsXdomain.xml")}catch(r){}a(),null==l&&e.ajax({url:"crossdomain.xml",type:"HEAD",dataType:"xml",success:function(){l="yes"},error:function(){l="no"},complete:function(){try{sessionStorage.setItem("wsXdomain.xml",l)}catch(e){}a()}})})});