webshims.register("form-native-extend",function(t,e,r,a){"use strict";var n=e.support;if(n.formvalidation&&!e.bugs.bustedValidity){var i=e.inputTypes,u=!1,s={},o=function(){var e,r=function(){t(this).prop("validity")},a=function(){t("input").each(r)};return function(){clearTimeout(e),e=setTimeout(a,9)}}();e.addInputType=function(r,a){i[r]=a,u=!0,t.isDOMReady&&n.formvalidation&&!e.bugs.bustedValidity&&o()},e.addValidityRule=function(t,e){s[t]=e},t.each({typeMismatch:"mismatch",badInput:"bad"},function(t,r){e.addValidityRule(t,function(e,a,n,u){if(""===a)return!1;var s=u[t];return"type"in n||(n.type=(e[0].getAttribute("type")||"").toLowerCase()),i[n.type]&&i[n.type][r]&&(s=i[n.type][r](a,e)),s||!1})});var p=e.modules["form-number-date-api"],l=p.loaded&&!p.test(),m=["customError","badInput","typeMismatch","rangeUnderflow","rangeOverflow","stepMismatch","tooLong","tooShort","patternMismatch","valueMissing","valid"],d=["value"],f=[],c=function(e){if(e||u){var r=(e.getAttribute&&e.getAttribute("type")||e.type||"").toLowerCase();i[r]&&t.prop(e,"validity")}},N={};if(["input","textarea","select"].forEach(function(r){var a=e.defineNodeNameProperty(r,"setCustomValidity",{prop:{value:function(n){n+="";var i="input"==r?t(this).getNativeElement()[0]:this;a.prop._supvalue.call(i,n),l&&(e.data(i,"hasCustomError",!!n),c(i))}}});N[r]=a.prop._supvalue}),l&&(d.push("min"),d.push("max"),d.push("step"),f.push("input")),l){var b;if(f.forEach(function(r){var a=e.defineNodeNameProperty(r,"validity",{prop:{get:function(){if(!b){var n="input"==r?t(this).getNativeElement()[0]:this,u=a.prop._supget.call(n);if(!u)return u;var o={};if(m.forEach(function(t){o[t]=u[t]||!1}),!t.prop(n,"willValidate"))return o;b=!0;var p,l=t(n),d={type:(n.getAttribute&&n.getAttribute("type")||n.type||"").toLowerCase(),nodeName:(n.nodeName||"").toLowerCase()},f=l.val(),c=!!e.data(n,"hasCustomError");if(b=!1,o.customError=c,o.valid&&o.customError)o.valid=!1;else if(!o.valid){var v=!0;t.each(o,function(t,e){return e?(v=!1,!1):void 0}),v&&(o.valid=!0)}return t.each(s,function(t,a){o[t]=a(l,f,d,o),o[t]&&(o.valid||!p)&&i[d.type]&&(N[r].call(n,e.createValidationMessage(n,t)),o.valid=!1,p=!0)}),o.valid&&(N[r].call(n,""),e.data(n,"hasCustomError",!1)),o}},writeable:!1}})}),d.forEach(function(t){e.onNodeNamesPropertyModify(f,t,function(){c(this)})}),a.addEventListener){var v,h=function(t){"form"in t.target&&(clearTimeout(v),c(t.target))};a.addEventListener("change",h,!0),a.addEventListener("input",function(t){clearTimeout(v),v=setTimeout(function(){c(t.target)},290)},!0)}var g=f.join(",");e.addReady(function(e,r){u&&t(g,e).add(r.filter(g)).each(function(){c(this)})})}e.defineNodeNameProperty("input","type",{prop:{get:function(){var t=this,r=(t.getAttribute&&t.getAttribute("type")||"").toLowerCase();return e.inputTypes[r]?r:t.type}}})}}),webshims.register("form-number-date-api",function(t,e,r,a){"use strict";e.addInputType||e.error("you can not call forms-ext feature after calling forms feature. call both at once instead: $.webshims.polyfill('forms forms-ext')"),e.getStep||(e.getStep=function(e,r){var a=t.attr(e,"step");return"any"===a?a:(r=r||o(e),i[r]&&i[r].step?(a=b.number.asNumber(a),(!isNaN(a)&&a>0?a:i[r].step)*(i[r].stepScaleFactor||1)):a)}),e.addMinMaxNumberToCache||(e.addMinMaxNumberToCache=function(t,e,r){t+"AsNumber"in r||(r[t+"AsNumber"]=i[r.type].asNumber(e.attr(t)),isNaN(r[t+"AsNumber"])&&t+"Default"in i[r.type]&&(r[t+"AsNumber"]=i[r.type][t+"Default"]))});var n=parseInt("NaN",10),i=e.inputTypes,u=function(t){return"number"==typeof t||t&&t==1*t},s=function(e){return t('<input type="'+e+'" />').prop("type")===e},o=function(t){return(t.getAttribute("type")||"").toLowerCase()},p=function(t){return t&&!isNaN(1*t)},l=e.addMinMaxNumberToCache,m=function(t,e){t=""+t,e-=t.length;for(var r=0;e>r;r++)t="0"+t;return t},d=1e-7,f=e.bugs.bustedValidity;e.addValidityRule("stepMismatch",function(t,r,a,n){if(""===r)return!1;if("type"in a||(a.type=o(t[0])),"week"==a.type)return!1;var u,s,p=(n||{}).stepMismatch||!1;if(i[a.type]&&i[a.type].step){if("step"in a||(a.step=e.getStep(t[0],a.type)),"any"==a.step)return!1;if("valueAsNumber"in a||(a.valueAsNumber=i[a.type].asNumber(r)),isNaN(a.valueAsNumber))return!1;l("min",t,a),u=a.minAsNumber,isNaN(u)&&(s=t.prop("defaultValue"))&&(u=i[a.type].asNumber(s)),isNaN(u)&&(u=i[a.type].stepBase||0),p=Math.abs((a.valueAsNumber-u)%a.step),p=!(d>=p||Math.abs(p-a.step)<=d)}return p}),[{name:"rangeOverflow",attr:"max",factor:1},{name:"rangeUnderflow",attr:"min",factor:-1}].forEach(function(t){e.addValidityRule(t.name,function(e,r,a,n){var u=(n||{})[t.name]||!1;if(""===r)return u;if("type"in a||(a.type=o(e[0])),i[a.type]&&i[a.type].asNumber){if("valueAsNumber"in a||(a.valueAsNumber=i[a.type].asNumber(r)),isNaN(a.valueAsNumber))return!1;if(l(t.attr,e,a),isNaN(a[t.attr+"AsNumber"]))return u;u=a[t.attr+"AsNumber"]*t.factor<a.valueAsNumber*t.factor-d}return u})}),e.reflectProperties(["input"],["max","min","step"]);var c=e.defineNodeNameProperty("input","valueAsNumber",{prop:{get:function(){var e=this,r=o(e),a=i[r]&&i[r].asNumber?i[r].asNumber(t.prop(e,"value")):c.prop._supget&&c.prop._supget.apply(e,arguments);return null==a&&(a=n),a},set:function(r){var a=this,n=o(a);if(i[n]&&i[n].numberToString){if(isNaN(r))return t.prop(a,"value",""),void 0;var u=i[n].numberToString(r);u!==!1?t.prop(a,"value",u):e.error("INVALID_STATE_ERR: DOM Exception 11")}else c.prop._supset&&c.prop._supset.apply(a,arguments)}}}),N=e.defineNodeNameProperty("input","valueAsDate",{prop:{get:function(){var e=this,r=o(e);return i[r]&&i[r].asDate&&!i[r].noAsDate?i[r].asDate(t.prop(e,"value")):N.prop._supget&&N.prop._supget.call(e)||null},set:function(r){var a=this,n=o(a);if(!i[n]||!i[n].dateToString||i[n].noAsDate)return N.prop._supset&&N.prop._supset.apply(a,arguments)||null;if(null===r)return t.prop(a,"value",""),"";var u=i[n].dateToString(r);return u!==!1?(t.prop(a,"value",u),u):(e.error("INVALID_STATE_ERR: DOM Exception 11"),void 0)}}});t.each({stepUp:1,stepDown:-1},function(r,a){var n=e.defineNodeNameProperty("input",r,{prop:{value:function(r){var u,s,p,l,m,f,c,N=o(this);if(!i[N]||!i[N].asNumber){if(n.prop&&n.prop._supvalue)return n.prop._supvalue.apply(this,arguments);throw e.info("no step method for type: "+N),"invalid state error"}if(m={type:N},r||(r=1,e.warn("you should always use a factor for stepUp/stepDown")),r*=a,u=e.getStep(this,N),"any"==u)throw e.info("step is 'any' can't apply stepUp/stepDown"),"invalid state error";return e.addMinMaxNumberToCache("min",t(this),m),e.addMinMaxNumberToCache("max",t(this),m),s=t.prop(this,"valueAsNumber"),r>0&&!isNaN(m.minAsNumber)&&(isNaN(s)||m.minAsNumber>s)?(t.prop(this,"valueAsNumber",m.minAsNumber),void 0):0>r&&!isNaN(m.maxAsNumber)&&(isNaN(s)||m.maxAsNumber<s)?(t.prop(this,"valueAsNumber",m.maxAsNumber),void 0):(isNaN(s)&&(s=0),f=m.minAsNumber,isNaN(f)&&(c=t.prop(this,"defaultValue"))&&(f=i[N].asNumber(c)),f||(f=0),u*=r,s=1*(s+u).toFixed(5),p=(s-f)%u,p&&Math.abs(p)>d&&(l=s-p,l+=p>0?u:-u,s=1*l.toFixed(5)),!isNaN(m.maxAsNumber)&&s>m.maxAsNumber||!isNaN(m.minAsNumber)&&s<m.minAsNumber?(e.info("max/min overflow can't apply stepUp/stepDown"),void 0):(t.prop(this,"valueAsNumber",s),void 0))}}})});var b={number:{bad:function(t){return!u(t)},step:1,stepScaleFactor:1,asNumber:function(t){return u(t)?1*t:n},numberToString:function(t){return u(t)?t:!1}},range:{minDefault:0,maxDefault:100},color:{bad:function(){var t=/^\u0023[a-f0-9]{6}$/;return function(e){return!e||7!=e.length||!t.test(e)}}()},date:{bad:function(t){if(!t||!t.split||!/\d$/.test(t))return!0;var e,r=t.split(/\u002D/);if(3!==r.length)return!0;var a=!1;if(r[0].length<4||2!=r[1].length||r[1]>12||2!=r[2].length||r[2]>33)a=!0;else for(e=0;3>e;e++)if(!p(r[e])){a=!0;break}return a||t!==this.dateToString(this.asDate(t,!0))},step:1,stepScaleFactor:864e5,asDate:function(t,e){return!e&&this.bad(t)?null:new Date(this.asNumber(t,!0))},asNumber:function(t,e){var r=n;return(e||!this.bad(t))&&(t=t.split(/\u002D/),r=Date.UTC(t[0],t[1]-1,t[2])),r},numberToString:function(t){return u(t)?this.dateToString(new Date(1*t)):!1},dateToString:function(t){return t&&t.getFullYear?m(t.getUTCFullYear(),4)+"-"+m(t.getUTCMonth()+1,2)+"-"+m(t.getUTCDate(),2):!1}},time:{bad:function(e,r){if(!e||!e.split||!/\d$/.test(e))return!0;if(e=e.split(/\u003A/),e.length<2||e.length>3)return!0;var a,n=!1;return e[2]&&(e[2]=e[2].split(/\u002E/),a=parseInt(e[2][1],10),e[2]=e[2][0]),t.each(e,function(t,e){return p(e)&&2===e.length?void 0:(n=!0,!1)}),n?!0:e[0]>23||e[0]<0||e[1]>59||e[1]<0?!0:e[2]&&(e[2]>59||e[2]<0)?!0:a&&isNaN(a)?!0:(a&&(100>a?a*=100:10>a&&(a*=10)),r===!0?[e,a]:!1)},step:60,stepBase:0,stepScaleFactor:1e3,asDate:function(t){return t=new Date(this.asNumber(t)),isNaN(t)?null:t},asNumber:function(t){var e=n;return t=this.bad(t,!0),t!==!0&&(e=Date.UTC("1970",0,1,t[0][0],t[0][1],t[0][2]||0),t[1]&&(e+=t[1])),e},dateToString:function(t){if(t&&t.getUTCHours){var e=m(t.getUTCHours(),2)+":"+m(t.getUTCMinutes(),2),r=t.getSeconds();return"0"!=r&&(e+=":"+m(r,2)),r=t.getUTCMilliseconds(),"0"!=r&&(e+="."+m(r,3)),e}return!1}},month:{bad:function(t){return b.date.bad(t+"-01")},step:1,stepScaleFactor:!1,asDate:function(t){return new Date(b.date.asNumber(t+"-01"))},asNumber:function(t){var e=n;return t&&!this.bad(t)&&(t=t.split(/\u002D/),t[0]=1*t[0]-1970,t[1]=1*t[1]-1,e=12*t[0]+t[1]),e},numberToString:function(t){var e,r=!1;return u(t)&&(e=t%12,t=(t-e)/12+1970,e+=1,1>e&&(t-=1,e+=12),r=m(t,4)+"-"+m(e,2)),r},dateToString:function(t){if(t&&t.getUTCHours){var e=b.date.dateToString(t);return e.split&&(e=e.split(/\u002D/))?e[0]+"-"+e[1]:!1}return!1}},"datetime-local":{bad:function(t,e){return t&&t.split&&2===(t+"special").split(/\u0054/).length?(t=t.split(/\u0054/),b.date.bad(t[0])||b.time.bad(t[1],e)):!0},noAsDate:!0,asDate:function(t){return t=new Date(this.asNumber(t)),isNaN(t)?null:t},asNumber:function(t){var e=n,r=this.bad(t,!0);return r!==!0&&(t=t.split(/\u0054/)[0].split(/\u002D/),e=Date.UTC(t[0],t[1]-1,t[2],r[0][0],r[0][1],r[0][2]||0),r[1]&&(e+=r[1])),e},dateToString:function(t,e){return b.date.dateToString(t)+"T"+b.time.dateToString(t,e)}}};!f&&s("range")&&s("time")&&s("month")&&s("datetime-local")||(b.range=t.extend({},b.number,b.range),b.time=t.extend({},b.date,b.time),b.month=t.extend({},b.date,b.month),b["datetime-local"]=t.extend({},b.date,b.time,b["datetime-local"])),["number","month","range","date","time","color","datetime-local"].forEach(function(t){(f||!s(t))&&e.addInputType(t,b[t])}),null==t("<input />").prop("labels")&&e.defineNodeNamesProperty("button, input, keygen, meter, output, progress, select, textarea","labels",{prop:{get:function(){if("hidden"==this.type)return null;var e=this.id,r=t(this).closest("label").filter(function(){var t=this.attributes["for"]||{};return!t.specified||t.value==e});return e&&(r=r.add('label[for="'+e+'"]')),r.get()},writeable:!1}})});