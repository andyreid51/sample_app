webshims.register("form-number-date-api",function(t,e,a,r){"use strict";e.addInputType||e.error("you can not call forms-ext feature after calling forms feature. call both at once instead: $.webshims.polyfill('forms forms-ext')"),e.getStep||(e.getStep=function(e,a){var r=t.attr(e,"step");return"any"===r?r:(a=a||o(e),n[a]&&n[a].step?(r=N.number.asNumber(r),(!isNaN(r)&&r>0?r:n[a].step)*(n[a].stepScaleFactor||1)):r)}),e.addMinMaxNumberToCache||(e.addMinMaxNumberToCache=function(t,e,a){t+"AsNumber"in a||(a[t+"AsNumber"]=n[a.type].asNumber(e.attr(t)),isNaN(a[t+"AsNumber"])&&t+"Default"in n[a.type]&&(a[t+"AsNumber"]=n[a.type][t+"Default"]))});var i=parseInt("NaN",10),n=e.inputTypes,s=function(t){return"number"==typeof t||t&&t==1*t},u=function(e){return t('<input type="'+e+'" />').prop("type")===e},o=function(t){return(t.getAttribute("type")||"").toLowerCase()},p=function(t){return t&&!isNaN(1*t)},l=e.addMinMaxNumberToCache,d=function(t,e){t=""+t,e-=t.length;for(var a=0;e>a;a++)t="0"+t;return t},m=1e-7,f=e.bugs.bustedValidity;e.addValidityRule("stepMismatch",function(t,a,r,i){if(""===a)return!1;if("type"in r||(r.type=o(t[0])),"week"==r.type)return!1;var s,u,p=(i||{}).stepMismatch||!1;if(n[r.type]&&n[r.type].step){if("step"in r||(r.step=e.getStep(t[0],r.type)),"any"==r.step)return!1;if("valueAsNumber"in r||(r.valueAsNumber=n[r.type].asNumber(a)),isNaN(r.valueAsNumber))return!1;l("min",t,r),s=r.minAsNumber,isNaN(s)&&(u=t.prop("defaultValue"))&&(s=n[r.type].asNumber(u)),isNaN(s)&&(s=n[r.type].stepBase||0),p=Math.abs((r.valueAsNumber-s)%r.step),p=!(m>=p||Math.abs(p-r.step)<=m)}return p}),[{name:"rangeOverflow",attr:"max",factor:1},{name:"rangeUnderflow",attr:"min",factor:-1}].forEach(function(t){e.addValidityRule(t.name,function(e,a,r,i){var s=(i||{})[t.name]||!1;if(""===a)return s;if("type"in r||(r.type=o(e[0])),n[r.type]&&n[r.type].asNumber){if("valueAsNumber"in r||(r.valueAsNumber=n[r.type].asNumber(a)),isNaN(r.valueAsNumber))return!1;if(l(t.attr,e,r),isNaN(r[t.attr+"AsNumber"]))return s;s=r[t.attr+"AsNumber"]*t.factor<r.valueAsNumber*t.factor-m}return s})}),e.reflectProperties(["input"],["max","min","step"]);var c=e.defineNodeNameProperty("input","valueAsNumber",{prop:{get:function(){var e=this,a=o(e),r=n[a]&&n[a].asNumber?n[a].asNumber(t.prop(e,"value")):c.prop._supget&&c.prop._supget.apply(e,arguments);return null==r&&(r=i),r},set:function(a){var r=this,i=o(r);if(n[i]&&n[i].numberToString){if(isNaN(a))return t.prop(r,"value",""),void 0;var s=n[i].numberToString(a);s!==!1?t.prop(r,"value",s):e.error("INVALID_STATE_ERR: DOM Exception 11")}else c.prop._supset&&c.prop._supset.apply(r,arguments)}}}),h=e.defineNodeNameProperty("input","valueAsDate",{prop:{get:function(){var e=this,a=o(e);return n[a]&&n[a].asDate&&!n[a].noAsDate?n[a].asDate(t.prop(e,"value")):h.prop._supget&&h.prop._supget.call(e)||null},set:function(a){var r=this,i=o(r);if(!n[i]||!n[i].dateToString||n[i].noAsDate)return h.prop._supset&&h.prop._supset.apply(r,arguments)||null;if(null===a)return t.prop(r,"value",""),"";var s=n[i].dateToString(a);return s!==!1?(t.prop(r,"value",s),s):(e.error("INVALID_STATE_ERR: DOM Exception 11"),void 0)}}});t.each({stepUp:1,stepDown:-1},function(a,r){var i=e.defineNodeNameProperty("input",a,{prop:{value:function(a){var s,u,p,l,d,f,c,h=o(this);if(!n[h]||!n[h].asNumber){if(i.prop&&i.prop._supvalue)return i.prop._supvalue.apply(this,arguments);throw e.info("no step method for type: "+h),"invalid state error"}if(d={type:h},a||(a=1,e.warn("you should always use a factor for stepUp/stepDown")),a*=r,s=e.getStep(this,h),"any"==s)throw e.info("step is 'any' can't apply stepUp/stepDown"),"invalid state error";return e.addMinMaxNumberToCache("min",t(this),d),e.addMinMaxNumberToCache("max",t(this),d),u=t.prop(this,"valueAsNumber"),a>0&&!isNaN(d.minAsNumber)&&(isNaN(u)||d.minAsNumber>u)?(t.prop(this,"valueAsNumber",d.minAsNumber),void 0):0>a&&!isNaN(d.maxAsNumber)&&(isNaN(u)||d.maxAsNumber<u)?(t.prop(this,"valueAsNumber",d.maxAsNumber),void 0):(isNaN(u)&&(u=0),f=d.minAsNumber,isNaN(f)&&(c=t.prop(this,"defaultValue"))&&(f=n[h].asNumber(c)),f||(f=0),s*=a,u=1*(u+s).toFixed(5),p=(u-f)%s,p&&Math.abs(p)>m&&(l=u-p,l+=p>0?s:-s,u=1*l.toFixed(5)),!isNaN(d.maxAsNumber)&&u>d.maxAsNumber||!isNaN(d.minAsNumber)&&u<d.minAsNumber?(e.info("max/min overflow can't apply stepUp/stepDown"),void 0):(t.prop(this,"valueAsNumber",u),void 0))}}})});var N={number:{bad:function(t){return!s(t)},step:1,stepScaleFactor:1,asNumber:function(t){return s(t)?1*t:i},numberToString:function(t){return s(t)?t:!1}},range:{minDefault:0,maxDefault:100},color:{bad:function(){var t=/^\u0023[a-f0-9]{6}$/;return function(e){return!e||7!=e.length||!t.test(e)}}()},date:{bad:function(t){if(!t||!t.split||!/\d$/.test(t))return!0;var e,a=t.split(/\u002D/);if(3!==a.length)return!0;var r=!1;if(a[0].length<4||2!=a[1].length||a[1]>12||2!=a[2].length||a[2]>33)r=!0;else for(e=0;3>e;e++)if(!p(a[e])){r=!0;break}return r||t!==this.dateToString(this.asDate(t,!0))},step:1,stepScaleFactor:864e5,asDate:function(t,e){return!e&&this.bad(t)?null:new Date(this.asNumber(t,!0))},asNumber:function(t,e){var a=i;return(e||!this.bad(t))&&(t=t.split(/\u002D/),a=Date.UTC(t[0],t[1]-1,t[2])),a},numberToString:function(t){return s(t)?this.dateToString(new Date(1*t)):!1},dateToString:function(t){return t&&t.getFullYear?d(t.getUTCFullYear(),4)+"-"+d(t.getUTCMonth()+1,2)+"-"+d(t.getUTCDate(),2):!1}},time:{bad:function(e,a){if(!e||!e.split||!/\d$/.test(e))return!0;if(e=e.split(/\u003A/),e.length<2||e.length>3)return!0;var r,i=!1;return e[2]&&(e[2]=e[2].split(/\u002E/),r=parseInt(e[2][1],10),e[2]=e[2][0]),t.each(e,function(t,e){return p(e)&&2===e.length?void 0:(i=!0,!1)}),i?!0:e[0]>23||e[0]<0||e[1]>59||e[1]<0?!0:e[2]&&(e[2]>59||e[2]<0)?!0:r&&isNaN(r)?!0:(r&&(100>r?r*=100:10>r&&(r*=10)),a===!0?[e,r]:!1)},step:60,stepBase:0,stepScaleFactor:1e3,asDate:function(t){return t=new Date(this.asNumber(t)),isNaN(t)?null:t},asNumber:function(t){var e=i;return t=this.bad(t,!0),t!==!0&&(e=Date.UTC("1970",0,1,t[0][0],t[0][1],t[0][2]||0),t[1]&&(e+=t[1])),e},dateToString:function(t){if(t&&t.getUTCHours){var e=d(t.getUTCHours(),2)+":"+d(t.getUTCMinutes(),2),a=t.getSeconds();return"0"!=a&&(e+=":"+d(a,2)),a=t.getUTCMilliseconds(),"0"!=a&&(e+="."+d(a,3)),e}return!1}},month:{bad:function(t){return N.date.bad(t+"-01")},step:1,stepScaleFactor:!1,asDate:function(t){return new Date(N.date.asNumber(t+"-01"))},asNumber:function(t){var e=i;return t&&!this.bad(t)&&(t=t.split(/\u002D/),t[0]=1*t[0]-1970,t[1]=1*t[1]-1,e=12*t[0]+t[1]),e},numberToString:function(t){var e,a=!1;return s(t)&&(e=t%12,t=(t-e)/12+1970,e+=1,1>e&&(t-=1,e+=12),a=d(t,4)+"-"+d(e,2)),a},dateToString:function(t){if(t&&t.getUTCHours){var e=N.date.dateToString(t);return e.split&&(e=e.split(/\u002D/))?e[0]+"-"+e[1]:!1}return!1}},"datetime-local":{bad:function(t,e){return t&&t.split&&2===(t+"special").split(/\u0054/).length?(t=t.split(/\u0054/),N.date.bad(t[0])||N.time.bad(t[1],e)):!0},noAsDate:!0,asDate:function(t){return t=new Date(this.asNumber(t)),isNaN(t)?null:t},asNumber:function(t){var e=i,a=this.bad(t,!0);return a!==!0&&(t=t.split(/\u0054/)[0].split(/\u002D/),e=Date.UTC(t[0],t[1]-1,t[2],a[0][0],a[0][1],a[0][2]||0),a[1]&&(e+=a[1])),e},dateToString:function(t,e){return N.date.dateToString(t)+"T"+N.time.dateToString(t,e)}}};!f&&u("range")&&u("time")&&u("month")&&u("datetime-local")||(N.range=t.extend({},N.number,N.range),N.time=t.extend({},N.date,N.time),N.month=t.extend({},N.date,N.month),N["datetime-local"]=t.extend({},N.date,N.time,N["datetime-local"])),["number","month","range","date","time","color","datetime-local"].forEach(function(t){(f||!u(t))&&e.addInputType(t,N[t])}),null==t("<input />").prop("labels")&&e.defineNodeNamesProperty("button, input, keygen, meter, output, progress, select, textarea","labels",{prop:{get:function(){if("hidden"==this.type)return null;var e=this.id,a=t(this).closest("label").filter(function(){var t=this.attributes["for"]||{};return!t.specified||t.value==e});return e&&(a=a.add('label[for="'+e+'"]')),a.get()},writeable:!1}})}),webshims.register("form-datalist",function(t,e,a,r,i,n){"use strict";var s=function(t){t&&"string"==typeof t||(t="DOM"),s[t+"Loaded"]||(s[t+"Loaded"]=!0,e.ready(t,function(){e.loader.loadList(["form-datalist-lazy"])}))},u={submit:1,button:1,reset:1,hidden:1,range:1,date:1,month:1};e.modules["form-number-date-ui"].loaded&&t.extend(u,{number:1,time:1}),e.propTypes.element=function(a,i){e.createPropDefault(a,"attr"),a.prop||(a.prop={get:function(){var e=t.attr(this,i);return e&&(e=r.getElementById(e),e&&a.propNodeName&&!t.nodeName(e,a.propNodeName)&&(e=null)),e||null},writeable:!1})},function(){var o=e.cfg.forms,p=e.support.datalist;if(!p||o.customDatalist){var l=function(){var a=function(){var e;!t.data(this,"datalistWidgetData")&&(e=t.prop(this,"id"))?t('input[list="'+e+'"], input[data-wslist="'+e+'"]').eq(0).attr("list",e):t(this).triggerHandler("updateDatalist")},r={autocomplete:{attr:{get:function(){var e=this,a=t.data(e,"datalistWidget");return a?a._autocomplete:"autocomplete"in e?e.autocomplete:e.getAttribute("autocomplete")},set:function(e){var a=this,r=t.data(a,"datalistWidget");r?(r._autocomplete=e,"off"==e&&r.hideList()):"autocomplete"in a?a.autocomplete=e:a.setAttribute("autocomplete",e)}}}};p?((t("<datalist><select><option></option></select></datalist>").prop("options")||[]).length||e.defineNodeNameProperty("datalist","options",{prop:{writeable:!1,get:function(){var e=this.options||[];if(!e.length){var a=this,r=t("select",a);r[0]&&r[0].options&&r[0].options.length&&(e=r[0].options)}return e}}}),r.list={attr:{get:function(){var a=e.contentAttr(this,"list");return null!=a?(t.data(this,"datalistListAttr",a),u[t.prop(this,"type")]||u[t.attr(this,"type")]||this.removeAttribute("list")):a=t.data(this,"datalistListAttr"),null==a?i:a},set:function(a){var r=this;t.data(r,"datalistListAttr",a),u[t.prop(this,"type")]||u[t.attr(this,"type")]?r.setAttribute("list",a):(e.objectCreate(d,i,{input:r,id:a,datalist:t.prop(r,"list")}),r.setAttribute("data-wslist",a)),t(r).triggerHandler("listdatalistchange")}},initAttr:!0,reflect:!0,propType:"element",propNodeName:"datalist"}):e.defineNodeNameProperties("input",{list:{attr:{get:function(){var t=e.contentAttr(this,"list");return null==t?i:t},set:function(a){var r=this;e.contentAttr(r,"list",a),e.objectCreate(n.shadowListProto,i,{input:r,id:a,datalist:t.prop(r,"list")}),t(r).triggerHandler("listdatalistchange")}},initAttr:!0,reflect:!0,propType:"element",propNodeName:"datalist"}}),e.defineNodeNameProperties("input",r),e.addReady(function(t,e){e.filter("datalist > select, datalist, datalist > option, datalist > select > option").closest("datalist").each(a)})},d={_create:function(r){if(!u[t.prop(r.input,"type")]&&!u[t.attr(r.input,"type")]){var i=r.datalist,n=t.data(r.input,"datalistWidget"),o=this;return i&&n&&n.datalist!==i?(n.datalist=i,n.id=r.id,t(n.datalist).off("updateDatalist.datalistWidget").on("updateDatalist.datalistWidget",t.proxy(n,"_resetListCached")),n._resetListCached(),void 0):i?(n&&n.datalist===i||(this.datalist=i,this.id=r.id,this.hasViewableData=!0,this._autocomplete=t.attr(r.input,"autocomplete"),t.data(r.input,"datalistWidget",this),t.data(i,"datalistWidgetData",this),s("WINDOWLOAD"),e.isReady("form-datalist-lazy")?a.QUnit?o._lazyCreate(r):setTimeout(function(){o._lazyCreate(r)},9):(t(r.input).one("focus",s),e.ready("form-datalist-lazy",function(){o._destroyed||o._lazyCreate(r)}))),void 0):(n&&n.destroy(),void 0)}},destroy:function(e){var n,s=t.attr(this.input,"autocomplete");t(this.input).off(".datalistWidget").removeData("datalistWidget"),this.shadowList.remove(),t(r).off(".datalist"+this.id),t(a).off(".datalist"+this.id),this.input.form&&this.input.id&&t(this.input.form).off("submit.datalistWidget"+this.input.id),this.input.removeAttribute("aria-haspopup"),s===i?this.input.removeAttribute("autocomplete"):t(this.input).attr("autocomplete",s),e&&"beforeunload"==e.type&&(n=this.input,setTimeout(function(){t.attr(n,"list",t.attr(n,"list"))},9)),this._destroyed=!0}};e.loader.addModule("form-datalist-lazy",{noAutoCallback:!0,options:t.extend(n,{shadowListProto:d})}),n.list||(n.list={}),l()}}()});